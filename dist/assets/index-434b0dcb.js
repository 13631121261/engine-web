import{c as k}from"./index-1515df1a.js";import{w as C,x as z,y as D,z as B}from"./index-24a0fd9a.js";import I from"./popupForm-d492aa43.js";import{h as N,w as g,r as V,F as A,q as m,o as E,k as F,m as u,p as d,Q as S,V as q,z as _,t as G,K as p}from"./vue-974988d6.js";import"./validate-8bf15b2e.js";import"./index-a773531e.js";import"./index-11ae6512.js";import"./index-7182f49c.js";const K={class:"custom-tree-container",style:{"background-color":"#ffffff","margin-left":"10px","margin-right":"10px",height:"1000px","margin-bottom":"100px"}},M={style:{"margin-top":"20px"}},Q={class:"table-header-operate-text"},W=N({__name:"index",setup(R){const{t:i}=k();let n=g(!1);const t=V({name:"",id:0,p_id:0}),x=e=>{console.log(n),t.name=e.label,t.id=e.id,t.p_id=e.p_id,n.value=!0,console.log(n)},y=e=>{console.log(n),t.name="",t.id=0,t.p_id=e.id,n.value=!0};function h(){console.log(n),t.name="",t.id=0,t.p_id=0,n.value=!0}const v=(e,s)=>{B(s.id).then(o=>{console.log(o),o.code==1&&(r(),p({message:o.msg,type:"success"}))})};function b(e,s,o,l){l=="add"?(t.name=o,t.id=0,t.p_id=e,z(t).then(a=>{a.code==1?(r(),p({message:a.msg,type:"success"})):p({message:a.msg,type:"error"})})):l=="edit"&&(t.name=o,t.id=s,t.p_id=e,D(t).then(a=>{a.code==1?(r(),p({message:a.msg,type:"success"})):p({message:a.msg,type:"error"})})),n.value=!1,console.log(n)}const w=(e,{node:s,data:o,store:l})=>e("span",{class:"custom-tree-node"},e("span",null,s.label),e("span",null,e("a",{style:"font-size: 12px;height:23px;width:35px",class:"el-button el-button--primary",onClick:()=>y(o)},i("person.department.addend")),e("a",{style:"font-size: 12px;height:23px;width:35px",class:"el-button el-button--primary",onClick:()=>x(o)},i("person.department.edit")),e("a",{style:"font-size: 12px;height:23px;width:35px",class:"el-button el-button--danger",onClick:()=>v(s,o)},i("person.department.delete")))),f=g([]);A(()=>{r()});function r(){C().then(e=>{console.log(e),f.value=e.data})}return(e,s)=>{const o=m("Icon"),l=m("el-button"),a=m("el-tree");return E(),F("div",K,[u("div",null,[u("p",M,[d(l,{type:"primary",onClick:s[0]||(s[0]=c=>h()),style:{"margin-top":"20px","margin-left":"20px"}},{default:S(()=>[d(o,{name:"fa fa-plus",style:{color:"#ffffff","font-size":"14px"}}),u("span",Q,q(_(i)("Add")),1)]),_:1})])]),d(a,{style:{"margin-top":"30px","margin-left":"10px",width:"1000px"},data:f.value,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"render-content":w},null,8,["data"]),d(I,{show:_(n),"onUpdate:show":s[1]||(s[1]=c=>G(n)?n.value=c:n=c),department:t,onGetChange:b},null,8,["show","department"])])}}});export{W as default};
