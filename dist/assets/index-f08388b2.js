import{b as f,d as p,a as b,T as c}from"./index-11ae6512.js";import{c as g,a as h,$ as _,V as w}from"./index-1515df1a.js";import k from"./popupForm-c4f7b8dc.js";import{h as x,w as m,av as T,aw as v,F as I,o as y,k as C,p as n}from"./vue-974988d6.js";import"./index-7182f49c.js";import"./index-a773531e.js";import"./validate-8bf15b2e.js";const A={class:"default-main ba-table-box"},V=x({name:"auth/group",__name:"index",setup(D){const s=m(),i=m(),{t}=g();h();const e=new f(new _("/userApi/Roles/"),{dblClickNotEditColumn:[void 0],column:[{type:"selection",align:"center"},{label:t("auth.group.Group name"),prop:"name",align:"left",width:"200"},{label:t("auth.group.jurisdiction"),prop:"details",align:"left",width:300},{label:t("State"),prop:"status",align:"center",render:"tag",custom:{0:"danger",1:"success"},replaceValue:{0:t("Disable"),1:t("Enable")},width:120},{label:t("Update time"),prop:"update_time",align:"center",width:"160",render:"datetime"},{label:t("Create time"),prop:"create_time",align:"center",width:"160",render:"datetime"},{label:t("Operate"),align:"center",width:"130",render:"buttons",buttons:p(["edit","delete"])}]},{defaultItems:{status:"1"}},{onSubmit:({formEl:a,operate:r,items:o})=>{var o=T(o);o.rules=s.value.getCheckeds();for(const l in o)o[l]===null&&delete o[l];r=r.replace(r[0],r[0].toLowerCase());let d=()=>{e.form.submitLoading=!0,e.api.postData(r,o).then(l=>{var u;e.onTableHeaderAction("refresh",{}),e.form.submitLoading=!1,(u=e.form.operateIds)==null||u.shift(),e.form.operateIds.length>0?e.toggleForm("Edit",e.form.operateIds):e.toggleForm(),e.runAfter("onSubmit",{res:l})}).catch(()=>{e.form.submitLoading=!1})};return a?(e.form.ref=a,a.validate(l=>{l&&d()})):d(),!1},onTableDblclick:({row:a})=>e.table.extend.adminGroup.indexOf(a.id)===-1},{getIndex:({res:a})=>{e.table.extend.adminGroup=a.data.group,w(e.table.column,"render","buttons")}});return v("baTable",e),I(()=>{e.table.ref=i.value,e.mount(),e.getIndex(),console.log("sss="+e.table.ref),console.log(e.table.ref)}),(a,r)=>(y(),C("div",A,[n(b,{buttons:["refresh","add","edit","delete","columnDisplay"]}),n(c,{ref_key:"tableRef",ref:i},null,512),n(k,{ref_key:"formRef",ref:s},null,512)]))}});export{V as default};
