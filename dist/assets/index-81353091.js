import{C as M,b as X,T as Y}from"./index-11ae6512.js";import{c as F,Z as A,t as Z,_ as z,a as J,$ as W}from"./index-1515df1a.js";import{h as H,ar as ee,r as te,w as B,j as V,q as _,a8 as ne,o as l,k as I,p as d,Q as o,a9 as v,at as ae,Y as P,as as $,af as oe,z as e,ag as le,m as g,P as r,a7 as m,V as C,X as E,a3 as se,ai as re,aw as de,F as ie,a6 as ce,K as ue}from"./vue-974988d6.js";import pe from"./popupForm-99be5dd6.js";import{v as be}from"./index-24a0fd9a.js";import"./index-7182f49c.js";import"./validate-8bf15b2e.js";import"./index-a773531e.js";const me={class:"table-header-operate-text"},fe={class:"table-header-operate-text"},_e={class:"mlr-12"},he={class:"table-header-operate-text"},ge={class:"table-header-operate-text"},ke={class:"table-header-operate-text"},ye={class:"table-header-operate-text"},ve={class:"table-search"},we={key:1,class:"table-search-button-group"},xe=H({__name:"index_person",props:{buttons:{default:()=>["refresh","add","edit","delete"]},quickSearchPlaceholder:{default:""}},setup(D){const u=D,{t:a}=F(),t=ee("baTable"),f=te({bind_status:!0}),q=i=>{var n=0;i?n=1:n=0,t.onTableHeaderAction("bind_status",{keyword:n})};B("");const p=V(()=>{let i=[];for(let n of t.table.column)n.type==="selection"||n.render==="buttons"||n.enableColumnDisplayControl===!1||i.push(n);return i}),w=V(()=>t.table.selection.length>0),x=(i,n={})=>{t.onTableHeaderAction(i,n)},s=()=>{t.onTableHeaderAction("quick-search",{keyword:f.quickSearch})},b=(i,n)=>{t.onTableHeaderAction("change-show-column",{field:n,value:i})};return(i,n)=>{const k=_("Icon"),h=_("el-button"),y=_("el-tooltip"),N=_("el-switch"),R=_("el-popconfirm"),O=_("el-upload"),U=_("el-input"),j=_("el-checkbox"),Q=_("el-dropdown-item"),G=_("el-dropdown-menu"),K=_("el-dropdown"),S=ne("blur");return l(),I(E,null,[d(le,{name:"el-zoom-in-bottom",mode:"out-in"},{default:o(()=>[v(d(M,null,ae({_:2},[P(i.$slots,(c,T)=>({name:T,fn:o(()=>[$(i.$slots,T,{},void 0,!0)])}))]),1536),[[oe,u.buttons.includes("comSearch")&&e(t).table.showComSearch]])]),_:3}),g("div",re(i.$attrs,{class:"table-header ba-scroll-style"}),[$(i.$slots,"refreshPrepend",{},void 0,!0),u.buttons.includes("refresh")?(l(),r(y,{key:0,content:e(a)("Refresh"),placement:"top"},{default:o(()=>[v((l(),r(h,{onClick:n[0]||(n[0]=c=>x("refresh",{loading:!0})),color:"#40485b",class:"table-header-operate",type:"info"},{default:o(()=>[d(k,{name:"fa fa-refresh"})]),_:1})),[[S]])]),_:1},8,["content"])):m("",!0),$(i.$slots,"refreshAppend",{},void 0,!0),d(N,{modelValue:f.bind_status,"onUpdate:modelValue":n[1]||(n[1]=c=>f.bind_status=c),onChange:q,class:"ml-2",checked:"","inline-prompt":"",style:{"--el-switch-on-color":"#66BBFF","--el-switch-off-color":"#aaaaaa","margin-left":"20px"},"active-text":e(a)("isbind"),"inactive-text":e(a)("nobind")},null,8,["modelValue","active-text","inactive-text"]),u.buttons.includes("add")&&e(A)("add")?(l(),r(y,{key:1,content:e(a)("Add"),placement:"top"},{default:o(()=>[v((l(),r(h,{onClick:n[2]||(n[2]=c=>x("add")),class:"table-header-operate",type:"primary"},{default:o(()=>[d(k,{name:"fa fa-plus"}),g("span",me,C(e(a)("Add")),1)]),_:1})),[[S]])]),_:1},8,["content"])):m("",!0),u.buttons.includes("edit")&&e(A)("edit")?(l(),r(y,{key:2,content:e(a)("Edit selected row"),placement:"top"},{default:o(()=>[v((l(),r(h,{onClick:n[3]||(n[3]=c=>x("edit")),disabled:!w.value,class:"table-header-operate",type:"primary"},{default:o(()=>[d(k,{name:"fa fa-pencil"}),g("span",fe,C(e(a)("Edit")),1)]),_:1},8,["disabled"])),[[S]])]),_:1},8,["content"])):m("",!0),u.buttons.includes("delete")&&e(A)("del")?(l(),r(R,{key:3,onConfirm:n[4]||(n[4]=c=>x("delete")),"confirm-button-text":e(a)("Delete"),"cancel-button-text":e(a)("Cancel"),confirmButtonType:"danger",title:e(a)("Are you sure to delete the selected record?"),disabled:!w.value},{reference:o(()=>[g("div",_e,[d(y,{content:e(a)("Delete selected row"),placement:"top"},{default:o(()=>[v((l(),r(h,{disabled:!w.value,class:"table-header-operate",type:"danger"},{default:o(()=>[d(k,{name:"fa fa-trash"}),g("span",he,C(e(a)("Delete")),1)]),_:1},8,["disabled"])),[[S]])]),_:1},8,["content"])])]),_:1},8,["confirm-button-text","cancel-button-text","title","disabled"])):m("",!0),u.buttons.includes("import")&&e(A)("import")?(l(),r(y,{key:4,content:e(a)("Import from Excel"),placement:"top"},{default:o(()=>[d(O,{class:"table-header-operate",style:{"margin-top":"10px"},accept:"excel","show-file-list":"ture",action:"./userApi/uploadBeacon",multiple:"",name:"data.xlsx","auto-upload":"ture"},{default:o(()=>[v((l(),r(h,{class:"table-header-operate",type:"primary"},{default:o(()=>[d(k,{name:"fa fa-pencil"}),g("span",ge,C(e(a)("import")),1)]),_:1})),[[S]])]),_:1})]),_:1},8,["content"])):m("",!0),u.buttons.includes("export")&&e(A)("export")?(l(),r(y,{key:5,content:e(a)("export_tip"),placement:"top"},{default:o(()=>[v((l(),r(h,{onClick:n[5]||(n[5]=c=>x("export")),disabled:!w.value,class:"table-header-operate",type:"primary"},{default:o(()=>[d(k,{name:"fa fa-pencil"}),g("span",ke,C(e(a)("export")),1)]),_:1},8,["disabled"])),[[S]])]),_:1},8,["content"])):m("",!0),u.buttons.includes("unfold")?(l(),r(y,{key:6,content:(e(t).table.expandAll?e(a)("Shrink"):e(a)("Open"))+e(a)("All submenus"),placement:"top"},{default:o(()=>[v((l(),r(h,{onClick:n[6]||(n[6]=c=>e(t).onTableHeaderAction("unfold",{unfold:!e(t).table.expandAll})),class:"table-header-operate",type:e(t).table.expandAll?"danger":"warning"},{default:o(()=>[g("span",ye,C(e(t).table.expandAll?e(a)("Shrink all"):e(a)("Expand all")),1)]),_:1},8,["type"])),[[S]])]),_:1},8,["content"])):m("",!0),$(i.$slots,"default",{},void 0,!0),g("div",ve,[$(i.$slots,"quickSearchPrepend",{},void 0,!0),u.buttons.includes("quickSearch")?(l(),r(U,{key:0,modelValue:f.quickSearch,"onUpdate:modelValue":n[7]||(n[7]=c=>f.quickSearch=c),class:"xs-hidden quick-search",onInput:n[8]||(n[8]=c=>e(Z)(s,500)()),placeholder:i.quickSearchPlaceholder?i.quickSearchPlaceholder:e(a)("Search")},null,8,["modelValue","placeholder"])):m("",!0),u.buttons.includes("columnDisplay")||u.buttons.includes("comSearch")?(l(),I("div",we,[u.buttons.includes("columnDisplay")?(l(),r(K,{key:0,"max-height":380,"hide-on-click":!1},{dropdown:o(()=>[d(G,null,{default:o(()=>[(l(!0),I(E,null,P(p.value,(c,T)=>(l(),r(Q,{key:T},{default:o(()=>[c.prop?(l(),r(j,{key:0,onChange:L=>b(L,c.prop),checked:!c.show,"model-value":c.show,size:"small",label:c.label},null,8,["onChange","checked","model-value","label"])):m("",!0)]),_:2},1024))),128))]),_:1})]),default:o(()=>[d(h,{class:se(["table-search-button-item",u.buttons.includes("comSearch")?"right-border":""]),color:"#dcdfe6",plain:""},{default:o(()=>[d(k,{size:"14",name:"el-icon-Grid"})]),_:1},8,["class"])]),_:1})):m("",!0),u.buttons.includes("comSearch")?(l(),r(y,{key:1,disabled:e(t).table.showComSearch,content:e(a)("Expand generic search"),placement:"top"},{default:o(()=>[d(h,{class:"table-search-button-item",onClick:n[9]||(n[9]=c=>e(t).table.showComSearch=!e(t).table.showComSearch),color:"#dcdfe6",plain:""},{default:o(()=>[d(k,{size:"14",name:"el-icon-Search"})]),_:1})]),_:1},8,["disabled","content"])):m("",!0)])):m("",!0)])],16)],64)}}});const Se=z(xe,[["__scopeId","data-v-74e88a2a"]]),Ce={class:"default-main ba-table-box"},Ae=H({name:"auth/group",__name:"index",setup(D){const u=B(),a=B(),{t}=F();J();let f=[{render:"tipButton",name:"info",title:"bind",type:"success",icon:"fa fa-link",class:"table-row-info",disabledTip:!1,click:(s,b)=>{},display:(s,b)=>!0,disabled:(s,b)=>!1,attr:{}}],q=[{render:"tipButton",name:"info",title:"unbind",type:"success",icon:"fa fa-unlink",class:"table-row-info",disabledTip:!1,click:(s,b)=>{},display:(s,b)=>!0,disabled:(s,b)=>!1,attr:{color:"#626aef"}}];f=f.concat(q),f[0].click=(s,b)=>{console.log("点击了按钮"+s),p.toggleForm("Edit",[s.id]),p.form.items=s},f[1].click=(s,b)=>{console.log("点击了按钮"+s),p.toggleForm("unbind",s.id),p.form.items=s,x(s.idcard)};const p=new X(new W("/userApi/Person/"),{dblClickNotEditColumn:["all"],column:[{type:"selection",align:"center"},{label:t("person.bind.name"),prop:"name",width:"150",align:"center"},{label:t("State"),prop:"online",align:"center",render:"tag",custom:{0:"info",1:"success"},replaceValue:{0:t("person.bind.unline"),1:t("person.bind.online")}},{label:t("person.bind.isbind"),prop:"isbind",align:"center",render:"tag",custom:{0:"danger",1:"success"},replaceValue:{0:t("person.bind.unbind"),1:t("person.bind.bind")}},{label:t("person.bind.bind_mac"),prop:"bind_mac",align:"center",width:"160"},{label:t("person.bind.b_area_name"),prop:"b_area_name",align:"center",render:"tag"},{label:t("person.bind.gateway_mac"),prop:"gateway_mac",align:"center",render:"tag"},{label:t("person.bind.gateway_name"),prop:"gateway_name",align:"center",render:"tag"},{label:t("person.bind.map_name"),prop:"map_name",align:"center",render:"tag"},{label:t("fence_name"),prop:"fence_name",width:"150",align:"center",render:"tag"},{label:t("person.bind.phone"),prop:"phone",align:"center",width:"160"},{label:t("person.bind.last_time"),prop:"lasttime",align:"center",width:"160",render:"datetime"},{label:t("Operate"),align:"center",width:"130",render:"buttons",buttons:f}]},{defaultItems:{status:"1"}});de("baTable",p);var w;ie(()=>{p.table.ref=a.value,p.mount(),p.getIndex(),console.log("sss="+p.table.ref),console.log(p.table.ref),w=setInterval(function(){p.getIndex()},3e3)}),ce(()=>{clearInterval(w)});function x(s){be(s).then(b=>{b.code==1&&(p.getIndex(),ue({message:b.msg,type:"success"}))})}return(s,b)=>(l(),I("div",Ce,[d(Se,{buttons:["refresh","add","edit","delete","quickSearch","columnDisplay"],"quick-search-placeholder":e(t)("Quick search placeholder",{fields:e(t)("person.bind.name")})},null,8,["quick-search-placeholder"]),d(Y,{ref_key:"tableRef",ref:a},null,512),d(pe,{ref_key:"formRef",ref:u},null,512)]))}});const Ee=z(Ae,[["__scopeId","data-v-4b8f5017"]]);export{Ee as default};
