import{_ as b}from"./lodash-6aabf8b1.js";import{h as Y,w as c,G as E,aE as D,F as ee,n as le,q as f,o as te,k as oe,m as n,p as o,Q as a,V as x,Z as _,z as T,aF as ne,aG as ae,K as se,a0 as de,a1 as ie}from"./vue-974988d6.js";import{g as ce,b as ue,c as re}from"./index-2e1bac67.js";import{_ as pe}from"./index-1515df1a.js";const q=g=>(de("data-v-44b49c5e"),g=g(),ie(),g),fe={id:"wrap",style:{height:"auto"}},_e={id:"div1"},ve=q(()=>n("div",{class:"card-header"},[n("h1",null,"可选择网关")],-1)),ge={style:{height:"450px"}},he={class:"custom-tree-node"},me={id:"div2",style:{display:"flex","justify-content":"center","align-items":"center"}},ye={style:{"align-items":"center"}},be={id:"div3"},xe={class:"card-header"},ke=q(()=>n("h1",null,"已关联的网关",-1)),we={style:{height:"450px"}},Ce={class:"custom-tree-node"},Ne=Y({__name:"gateway_group",props:{config_key:{type:String,require:!1,default:""}},emits:["showpop"],setup(g,{emit:B}){const M=g,A={children:"children",label:"label",disabled:"disabled"},k=c(),w=c(),C=c("");E(C,e=>{k.value.filter(e)});const N=c("");E(N,e=>{w.value.filter(e)});let S=D(M),h=c(!0),m=c(!0);const u=c([]),d=c([]),V=c([]),G=c([]),r=c([]),s=c([]);ee(()=>{le(()=>{F(),P()})});const K=(e,l)=>(console.log(l),e?l.label.includes(e)||l.address.includes(e):!0);function F(){ce(S.config_key.value).then(e=>{e.code==1&&(k.value.filter(""),u.value=e.data,V.value=b.cloneDeep(e.data))}).finally(()=>{})}function P(){ue(S.config_key.value).then(e=>{e.code==1&&(w.value.filter(""),d.value=e.data,G.value=b.cloneDeep(e.data))}).finally(()=>{})}function U(e,l){if(h.value=!0,l.checkedKeys.length>0){console.log(l.checkedKeys.length),r.value=l.checkedNodes,console.log("选择="+l.checkedNodes);for(let t=0;t<l.checkedNodes.length;t++)console.log(l.checkedNodes[t]),h.value=!1}}function z(e,l){if(m.value=!0,l.checkedKeys.length>0){console.log(l.checkedKeys.length),s.value=l.checkedNodes,console.log("选择="+l.checkedNodes);for(let t=0;t<l.checkedNodes.length;t++)console.log(l.checkedNodes[t]),m.value=!1}}function Q(){for(let e=0;e<r.value.length;e++){const l={id:r.value[e].id,address:r.value[e].address,label:r.value[e].label,children:[]};r.value[e].is_append=!0,r.value[e].children||d.value[0].children.push(l)}for(let e=0;e<u.value.length;e++){if(u.value[e].children.length>0)for(let l=0;l<u.value[e].children.length;l++)for(let t=0;t<r.value.length;t++){console.log(r.value[t]);const p=u.value[e].children.findIndex(v=>v.id===r.value[t].id);p!=-1&&(u.value[e].children.splice(p,1),console.log("index="+p))}h.value=!0}}function R(){console.log(s);for(let e=0;e<s.value.length;e++){console.log("循环="+e),console.log(s.value[e].children);const l={id:s.value[e].id,assress:s.value[e].assress,label:s.value[e].label,children:[]};s.value[e].is_append=!0,(s.value[e].children==null||s.value[e].children.length==0)&&(console.log("push="),u.value[0].children.push(l))}for(let e=0;e<d.value.length;e++){if(d.value[e].children.length>0)for(let l=0;l<d.value[e].children.length;l++)for(let t=0;t<s.value.length;t++){console.log(s.value[t]);const p=d.value[e].children.findIndex(v=>v.id===s.value[t].id);p!=-1&&(d.value[e].children.splice(p,1),console.log("index="+p))}m.value=!0}}function Z(){console.log("重置"),d.value=b.cloneDeep(G.value),u.value=b.cloneDeep(V.value),h.value=!0,m.value=!0,console.log(u.value),console.log(V.value)}function H(){B("showpop"),console.log("点击返回")}function J(){return h.value}function L(){return m.value}function O(){return b.isEqual(G.value,d.value)}function W(){console.log(d.value),re(S.config_key.value,d.value).then(e=>{se({message:e.msg,type:"success"}),console.log(e)}).finally()}return(e,l)=>{const t=f("el-input"),p=f("el-text"),v=f("el-tree"),$=f("el-scrollbar"),j=f("el-card"),X=f("el-icon"),y=f("el-button");return te(),oe("div",fe,[n("div",_e,[o(j,{class:"box-card"},{header:a(()=>[ve]),default:a(()=>[n("div",ge,[o(t,{modelValue:C.value,"onUpdate:modelValue":l[0]||(l[0]=i=>C.value=i),placeholder:"Mac过滤"},null,8,["modelValue"]),o($,{style:{height:"300px","margin-bottom":"10px"}},{default:a(()=>[o(v,{"default-expand-all":"",accordion:"","node-key":"id",onCheck:U,style:{"margin-top":"10px"},ref_key:"atree",ref:k,data:u.value,"show-checkbox":"","filter-node-method":K},{default:a(({node:i,data:I})=>[n("span",he,[n("span",null,x(i.label),1),n("span",null,[o(p,{class:"mx-1",type:"primary"},{default:a(()=>[_(x(I.address),1)]),_:2},1024)])])]),_:1},8,["data"])]),_:1})])]),_:1})]),n("div",me,[n("div",ye,[o(y,{disabled:J(),type:"primary",style:{"margin-bottom":"10px"},onClick:l[1]||(l[1]=i=>Q())},{default:a(()=>[_(" 选择关联"),o(X,{class:"el-icon--right"},{default:a(()=>[o(T(ne))]),_:1})]),_:1},8,["disabled"]),o(y,{disabled:L(),type:"danger",icon:T(ae),style:{"margin-left":"0px","margin-top":"10px"},onClick:l[2]||(l[2]=i=>R())},{default:a(()=>[_("移除关联")]),_:1},8,["disabled","icon"])])]),n("div",be,[o(j,{class:"box-card"},{header:a(()=>[n("div",xe,[ke,n("div",null,[o(y,{style:{"margin-right":"0px"},class:"button",onClick:l[3]||(l[3]=i=>H())},{default:a(()=>[_("返回")]),_:1}),o(y,{class:"button",type:"warning",onClick:l[4]||(l[4]=i=>Z())},{default:a(()=>[_("重置")]),_:1}),o(y,{class:"button",type:"primary",disabled:O(),onClick:l[5]||(l[5]=i=>W())},{default:a(()=>[_("提交")]),_:1},8,["disabled"])])])]),default:a(()=>[n("div",we,[o(t,{modelValue:N.value,"onUpdate:modelValue":l[6]||(l[6]=i=>N.value=i),placeholder:"Mac过滤"},null,8,["modelValue"]),o($,{style:{height:"300px","margin-bottom":"10px"}},{default:a(()=>[o(v,{"default-expand-all":"","node-key":"id",onCheck:z,style:{"margin-top":"10px"},ref_key:"btree",ref:w,data:d.value,props:A,"show-checkbox":"","filter-node-method":K},{default:a(({node:i,data:I})=>[n("span",Ce,[n("span",null,x(i.label),1),n("span",null,[o(p,{class:"mx-1",type:"primary"},{default:a(()=>[_(x(I.address),1)]),_:2},1024)])])]),_:1},8,["data"])]),_:1})])]),_:1})])])}}});const Ke=pe(Ne,[["__scopeId","data-v-44b49c5e"]]);export{Ke as default};
