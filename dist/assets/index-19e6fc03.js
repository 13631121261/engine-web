import{u as N,j as Le,S as oe,E as re,_ as R,D as P,l as he,F as Xe,G as Ge,c as ke,L as J,H as Ye,I as xe,J as F,K as Ve,M as Je,a as De,e as Ze,N as be,r as Ee,O as Ie,P as Qe,b as me,C as et}from"./index-1515df1a.js";import{h as I,a2 as j,z as e,q as f,o as d,k as S,l as ne,V as T,a7 as V,P as k,a3 as D,a0 as we,a1 as Te,m as p,Y as le,X as E,Q as a,p as n,O as ee,w as ae,r as K,j as Z,F as X,ae as ue,n as Q,D as Ae,a9 as O,af as Ne,ag as Se,ah as tt,a5 as Pe,_ as se,Z as B,G as qe,a8 as ot,ai as nt,aj as lt,ak as at,al as Be,am as We,a6 as st,an as rt,i as ut}from"./vue-974988d6.js";import{c as ct,o as Re,g as Ue,r as Ce,s as it,a as dt}from"./router-23ec191f.js";import{I as mt}from"./index-11ae6512.js";import{D as _t,t as pt}from"./useDark-df56ad75.js";import{a as ft,i as vt}from"./index-24a0fd9a.js";import{F as ie}from"./index-a773531e.js";import{m as gt}from"./layout-a8cf179c.js";import"./index-7182f49c.js";const yt=v=>(we("data-v-d7b971ef"),v=v(),Te(),v),bt={class:"layout-logo"},ht=yt(()=>p("div",{style:{"margin-left":"50px"}},null,-1)),Ct=I({__name:"logo",setup(v){j(s=>({"409f580a":e(t).layout.layoutMode!="Streamline"?e(t).getColorVal("menuTopBarBackground"):"transparent"}));const t=N(),o=Le(),r=function(){t.layout.shrink&&!t.layout.menuCollapse&&ct(),t.setLayout("menuCollapse",!t.layout.menuCollapse),oe.set(re,{layoutMode:t.layout.layoutMode,menuCollapse:t.layout.menuCollapse})};return(s,m)=>{const b=f("Icon");return d(),S("div",bt,[ht,e(t).layout.menuCollapse?V("",!0):(d(),S("div",{key:0,style:ne({color:e(t).getColorVal("menuActiveColor")}),class:"website-name"},T(e(o).siteName),5)),e(t).layout.layoutMode!="Streamline"?(d(),k(b,{key:1,onClick:r,name:e(t).layout.menuCollapse?"fa fa-indent":"fa fa-dedent",class:D([e(t).layout.menuCollapse?"unfold":"","fold"]),color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["name","class","color"])):V("",!0)])}}});const He=R(Ct,[["__scopeId","data-v-d7b971ef"]]),kt=I({__name:"menuTree",props:{menus:{default:()=>[]}},setup(v){const t=v;j(s=>({20955865:e(o).getColorVal("menuActiveBackground")}));const o=N(),r=s=>{var m;["Streamline","Double"].includes(o.layout.layoutMode)&&((m=s.children)!=null&&m.length)&&Re(s.children[0])};return(s,m)=>{const b=f("Icon"),y=f("menu-tree",!0),C=f("el-sub-menu"),i=f("el-menu-item");return d(!0),S(E,null,le(t.menus,c=>(d(),S(E,null,[c.children&&c.children.length>0?(d(),k(C,{onClick:_=>r(c),index:c.path,key:c.path},{title:a(()=>{var _,l,u,$;return[n(b,{color:e(o).getColorVal("menuColor"),name:(_=c.meta)!=null&&_.icon?(l=c.meta)==null?void 0:l.icon:e(o).layout.menuDefaultIcon},null,8,["color","name"]),p("span",null,T((u=c.meta)!=null&&u.title?($=c.meta)==null?void 0:$.title:s.$t("noTitle")),1)]}),default:a(()=>[n(y,{menus:c.children},null,8,["menus"])]),_:2},1032,["onClick","index"])):(d(),k(i,{index:c.path,key:c.path,onClick:_=>e(Re)(c)},{default:a(()=>{var _,l,u,$;return[n(b,{color:e(o).getColorVal("menuColor"),name:(_=c.meta)!=null&&_.icon?(l=c.meta)==null?void 0:l.icon:e(o).layout.menuDefaultIcon},null,8,["color","name"]),p("span",null,T((u=c.meta)!=null&&u.title?($=c.meta)==null?void 0:$.title:s.$t("noTitle")),1)]}),_:2},1032,["index","onClick"]))],64))),256)}}});const _e=R(kt,[["__scopeId","data-v-f95e303f"]]),xt=I({__name:"menuVertical",setup(v){j(i=>({"89f6e890":b.value,"407bc23f":e(t).getColorVal("menuBackground"),"3386e460":e(t).getColorVal("menuColor"),"3227b9fa":e(t).getColorVal("menuActiveColor")}));const t=N(),o=P(),r=ee(),s=ae(),m=K({defaultActive:""}),b=Z(()=>{let i=0;return t.layout.menuShowTopBar&&(i=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+i)+"px)":"calc(100vh - "+i+"px)"}),y=i=>{m.defaultActive=i.path},C=()=>{Q(()=>{var c;let i=document.querySelector(".el-menu.layouts-menu-vertical li.is-active");if(!i)return!1;(c=s.value)==null||c.setScrollTop(i.offsetTop)})};return X(()=>{y(r),C()}),ue(i=>{y(i)}),(i,c)=>{const _=f("el-menu"),l=f("el-scrollbar");return d(),k(l,{ref_key:"verticalMenusRef",ref:s,class:"vertical-menus-scrollbar"},{default:a(()=>[n(_,{class:"layouts-menu-vertical","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":m.defaultActive,collapse:e(t).layout.menuCollapse},{default:a(()=>[n(_e,{menus:e(o).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}});const $e=(v,t)=>{for(let o=0;o<t.length;o++){const r=t[o];if(r.path==v||r.children&&r.children.length>0&&$e(v,r.children))return r}return!1},wt=I({__name:"menuVerticalChildren",setup(v){j(i=>({"676a4508":b.value,"5173dffa":e(t).getColorVal("menuBackground"),"79ac0c1c":e(t).getColorVal("menuColor"),"74a724b6":e(t).getColorVal("menuActiveColor")}));const t=N(),o=P(),r=ee(),s=ae(),m=K({defaultActive:"",routeChildren:[]}),b=Z(()=>{let i=0;return t.layout.menuShowTopBar&&(i=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+i)+"px)":"calc(100vh - "+i+"px)"}),y=i=>{let c=$e(i.path,o.state.tabsViewRoutes);c?(m.defaultActive=i.path,c.children&&c.children.length>0?m.routeChildren=c.children:m.routeChildren=[c]):m.routeChildren||(m.routeChildren=o.state.tabsViewRoutes)},C=()=>{Q(()=>{var c;let i=document.querySelector(".el-menu.layouts-menu-vertical-children li.is-active");if(!i)return!1;(c=s.value)==null||c.setScrollTop(i.offsetTop)})};return X(()=>{y(r),C()}),ue(i=>{y(i)}),(i,c)=>{const _=f("el-menu"),l=f("el-scrollbar");return d(),k(l,{ref_key:"verticalMenusRef",ref:s,class:"children-vertical-menus-scrollbar"},{default:a(()=>[n(_,{class:"layouts-menu-vertical-children","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":m.defaultActive,collapse:e(t).layout.menuCollapse},{default:a(()=>[m.routeChildren.length>0?(d(),k(_e,{key:0,menus:m.routeChildren},null,8,["menus"])):V("",!0)]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}});const Tt=I({name:"layout/aside",__name:"aside",setup(v){j(s=>({"33647b04":r.value}));const t=N(),o=P(),r=Z(()=>t.menuWidth());return X(()=>{console.log("异常="+r),console.log(r)}),(s,m)=>{const b=f("el-aside");return e(o).state.tabFullScreen?V("",!0):(d(),k(b,{key:0,class:D("layout-aside-"+e(t).layout.layoutMode+" "+(e(t).layout.shrink?"shrink":""))},{default:a(()=>[e(t).layout.menuShowTopBar?(d(),k(He,{key:0})):V("",!0),e(t).layout.layoutMode=="Double"?(d(),k(wt,{key:1})):(d(),k(xt,{key:2}))]),_:1},8,["class"]))}}});const Me=R(Tt,[["__scopeId","data-v-e0c324a1"]]);function Oe(){if(!Ae())throw new Error("useCurrentInstance() can only be used inside setup() or functional components!");const{appContext:v}=Ae();return{proxy:v.config.globalProperties}}const St={class:"el-dropdown-menu"},Bt=["onClick"],$t=I({__name:"index",props:{width:{default:150},items:{default:()=>[]}},emits:["contextmenuItemClick"],setup(v,{expose:t,emit:o}){const r=v,s=K({show:!1,axis:{x:0,y:0},menu:void 0,arrowAxis:10}),m=(C,i)=>{s.menu=C,s.axis=i,s.show=!0},b=C=>{C.disabled||(C.menu=tt(s.menu),o("contextmenuItemClick",C))},y=()=>{s.show=!1};return t({onShowContextmenu:m,onHideContextmenu:y}),X(()=>{he(document,"click",y)}),(C,i)=>{const c=f("Icon");return d(),k(Se,{name:"el-zoom-in-center"},{default:a(()=>[O((d(),S("div",{class:"el-popper is-pure is-light el-dropdown__popper ba-contextmenu",style:ne(`top: ${s.axis.y+5}px;left: ${s.axis.x-14}px;width:${r.width}px`),key:Math.random(),"aria-hidden":"false","data-popper-placement":"bottom"},[p("ul",St,[(d(!0),S(E,null,le(r.items,(_,l)=>(d(),S("li",{key:l,class:D(["el-dropdown-menu__item",_.disabled?"is-disabled":""]),tabindex:"-1",onClick:u=>b(_)},[n(c,{size:"12",name:_.icon},null,8,["name"]),p("span",null,T(_.label),1)],10,Bt))),128))]),p("span",{class:"el-popper__arrow",style:ne({left:`${s.arrowAxis}px`})},null,4)],4)),[[Ne,s.show]])]),_:1})}}});const Mt=R($t,[["__scopeId","data-v-b68cb97f"]]),Vt=["onClick","onContextmenu"],It=I({__name:"tabs",setup(v){j(g=>({"5fbf0dc5":e(r).getColorVal("headerBarTabColor"),"12b2839f":e(r).getColorVal("headerBarTabActiveColor"),"9ee2b184":e(r).layout.layoutMode=="Default"?"none":e(r).getColorVal("headerBarBackground")}));const t=ee(),o=Pe(),r=N(),s=P(),{proxy:m}=Oe(),b=ae(),y=Xe(),C=ae(),i=K({contextmenuItems:[{name:"refresh",label:"重新加载",icon:"fa fa-refresh"},{name:"close",label:"关闭标签",icon:"fa fa-times"},{name:"fullScreen",label:"当前标签全屏",icon:"el-icon-FullScreen"},{name:"closeOther",label:"关闭其他标签",icon:"fa fa-minus"},{name:"closeAll",label:"关闭全部标签",icon:"fa fa-stop"}]}),c=K({width:"0",transform:"translateX(0px)"}),_=g=>{o.push(g)},l=(g,M)=>{i.contextmenuItems[0].disabled=t.path!==g.path,i.contextmenuItems[4].disabled=i.contextmenuItems[3].disabled=s.state.tabsView.length==1;const{clientX:A,clientY:H}=M;C.value.onShowContextmenu(g,{x:A,y:H})},u=function(g){if(!g)return!1;c.width=g.clientWidth+"px",c.transform=`translateX(${g.offsetLeft}px)`;let M=g.offsetLeft+g.clientWidth-b.value.clientWidth;g.offsetLeft<b.value.scrollLeft?b.value.scrollTo(g.offsetLeft,0):M>b.value.scrollLeft&&b.value.scrollTo(M,0)},$=()=>{const g=s.state.tabsView.slice(-1)[0];g?o.push(g):o.push("/admin")},U=g=>{var M;s.closeTab(g),m.eventBus.emit("onTabViewClose",g),((M=s.state.activeRoute)==null?void 0:M.path)===g.path?$():(s.setActiveRoute(s.state.activeRoute),Q(()=>{u(y.value[s.state.activeIndex])})),C.value.onHideContextmenu()},w=g=>{var M;s.closeTabs(g),s.setActiveRoute(g),((M=s.state.activeRoute)==null?void 0:M.path)!==t.path&&o.push(g.path)},q=g=>{let M=Ue(s.state.tabsViewRoutes);if(M&&M.path==g.path)return w(g);s.closeTabs(!1),M&&Ce(M.path)},Y=async g=>{const{name:M,menu:A}=g;if(A)switch(M){case"refresh":m.eventBus.emit("onTabViewRefresh",A);break;case"close":U(A);break;case"closeOther":w(A);break;case"closeAll":q(A);break;case"fullScreen":t.path!==(A==null?void 0:A.path)&&o.push(A==null?void 0:A.path),s.setFullScreen(!0);break}},z=function(g){s.addTab(g),s.setActiveRoute(g),Q(()=>{u(y.value[s.state.activeIndex])})};return ue(async g=>{z(g)}),X(()=>{z(o.currentRoute.value),new Ge(b.value)}),(g,M)=>{const A=f("Icon");return d(),S(E,null,[p("div",{class:"nav-tabs",ref_key:"tabScrollbarRef",ref:b},[(d(!0),S(E,null,le(e(s).state.tabsView,(H,te)=>(d(),S("div",{onClick:L=>_(H),onContextmenu:se(L=>l(H,L),["prevent"]),class:D(["ba-nav-tab",e(s).state.activeIndex==te?"active":""]),ref_for:!0,ref:e(y).set,key:te},[B(T(H.meta.title)+" ",1),n(Se,{onAfterLeave:M[0]||(M[0]=L=>u(e(y)[e(s).state.activeIndex])),name:"el-fade-in"},{default:a(()=>[O(n(A,{class:"close-icon",onClick:se(L=>U(H),["stop"]),size:"15",name:"el-icon-Close"},null,8,["onClick"]),[[Ne,e(s).state.tabsView.length>1]])]),_:2},1024)],42,Vt))),128)),p("div",{style:ne(c),class:"nav-tabs-active-box"},null,4)],512),n(Mt,{ref_key:"contextmenuRef",ref:C,items:i.contextmenuItems,onContextmenuItemClick:Y},null,8,["items"])],64)}}});const Ke=R(It,[["__scopeId","data-v-1e4ba09f"]]),Fe=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],G=(()=>{if(typeof document>"u")return!1;const v=Fe[0],t={};for(const o of Fe)if((o==null?void 0:o[1])in document){for(const[s,m]of o.entries())t[v[s]]=m;return t}return!1})(),ze={change:G.fullscreenchange,error:G.fullscreenerror};let W={request(v=document.documentElement,t){return new Promise((o,r)=>{const s=()=>{W.off("change",s),o()};W.on("change",s);const m=v[G.requestFullscreen](t);m instanceof Promise&&m.then(s).catch(r)})},exit(){return new Promise((v,t)=>{if(!W.isFullscreen){v();return}const o=()=>{W.off("change",o),v()};W.on("change",o);const r=document[G.exitFullscreen]();r instanceof Promise&&r.then(o).catch(t)})},toggle(v,t){return W.isFullscreen?W.exit():W.request(v,t)},onchange(v){W.on("change",v)},onerror(v){W.on("error",v)},on(v,t){const o=ze[v];o&&document.addEventListener(o,t,!1)},off(v,t){const o=ze[v];o&&document.removeEventListener(o,t,!1)},raw:G};Object.defineProperties(W,{isFullscreen:{get:()=>!!document[G.fullscreenElement]},element:{enumerable:!0,get:()=>document[G.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[G.fullscreenEnabled]}});G||(W={isEnabled:!1});const de=W,pe=v=>(we("data-v-bac0a267"),v=v(),Te(),v),At={class:"layout-config-drawer"},Rt={class:"layout-mode-styles-box"},Ft={class:"layout-mode-box-style"},zt=pe(()=>p("div",{class:"layout-mode-style-box"},[p("div",{class:"layout-mode-style-aside"}),p("div",{class:"layout-mode-style-container-box"},[p("div",{class:"layout-mode-style-header"}),p("div",{class:"layout-mode-style-container"})])],-1)),Lt={class:"layout-mode-style-name"},Dt=pe(()=>p("div",{class:"layout-mode-style-box"},[p("div",{class:"layout-mode-style-aside"}),p("div",{class:"layout-mode-style-container-box"},[p("div",{class:"layout-mode-style-header"}),p("div",{class:"layout-mode-style-container"})])],-1)),Et={class:"layout-mode-style-name"},Nt=pe(()=>p("div",{class:"layout-mode-style-box"},[p("div",{class:"layout-mode-style-container-box"},[p("div",{class:"layout-mode-style-header"}),p("div",{class:"layout-mode-style-container"})])],-1)),Pt={class:"layout-mode-style-name"},qt=pe(()=>p("div",{class:"layout-mode-style-box"},[p("div",{class:"layout-mode-style-aside"}),p("div",{class:"layout-mode-style-container-box"},[p("div",{class:"layout-mode-style-header"}),p("div",{class:"layout-mode-style-container"})])],-1)),Wt={class:"layout-mode-style-name"},Ut={class:"layout-config-global"},Ht={class:"layout-config-aside"},Ot={class:"layout-config-aside"},Kt={class:"ba-center"},jt=I({__name:"config",setup(v){const{t}=ke(),o=N(),r=P(),s=Pe(),m=(_,l)=>{o.setLayout(l,_)},b=(_,l)=>{if(_===null)return;const u=o.layout[l];o.layout.isDark?u[1]=_:u[0]=_,o.setLayout(l,u)},y=_=>{oe.set(re,{layoutMode:_,menuCollapse:o.layout.menuCollapse}),o.setLayoutMode(_)},C=(_,l)=>{o.setLayout(l,_);const u=r.state.tabsViewRoutes;r.setTabsViewRoutes([]),setTimeout(()=>{r.setTabsViewRoutes(u)},200)},i=()=>{o.setLayout("showDrawer",!1)},c=()=>{J.remove(Ye),oe.remove(re),s.go(0)};return(_,l)=>{const u=f("el-divider"),$=f("el-col"),U=f("el-row"),w=f("el-form-item"),q=f("el-option"),Y=f("el-select"),z=f("el-color-picker"),g=f("el-switch"),M=f("el-input"),A=f("el-button"),H=f("el-popconfirm"),te=f("el-form"),L=f("el-scrollbar"),h=f("el-drawer");return d(),S("div",At,[n(h,{"model-value":e(o).layout.showDrawer,title:e(t)("layouts.Layout configuration"),size:"310px",onClose:i},{default:a(()=>[n(L,{class:"layout-mode-style-scrollbar"},{default:a(()=>[n(te,{ref:"formRef",model:e(o).layout},{default:a(()=>[p("div",Rt,[n(u,{"border-style":"dashed"},{default:a(()=>[B(T(e(t)("layouts.Layout mode")),1)]),_:1}),p("div",Ft,[n(U,{class:"layout-mode-box-style-row",gutter:10},{default:a(()=>[n($,{span:12},{default:a(()=>[p("div",{onClick:l[0]||(l[0]=x=>y("Default")),class:D(["layout-mode-style default",e(o).layout.layoutMode=="Default"?"active":""])},[zt,p("div",Lt,T(e(t)("layouts.default")),1)],2)]),_:1}),n($,{span:12},{default:a(()=>[p("div",{onClick:l[1]||(l[1]=x=>y("Classic")),class:D(["layout-mode-style classic",e(o).layout.layoutMode=="Classic"?"active":""])},[Dt,p("div",Et,T(e(t)("layouts.classic")),1)],2)]),_:1})]),_:1}),n(U,{gutter:10},{default:a(()=>[n($,{span:12},{default:a(()=>[p("div",{onClick:l[2]||(l[2]=x=>y("Streamline")),class:D(["layout-mode-style streamline",e(o).layout.layoutMode=="Streamline"?"active":""])},[Nt,p("div",Pt,T(e(t)("layouts.Single column")),1)],2)]),_:1}),n($,{span:12},{default:a(()=>[p("div",{onClick:l[3]||(l[3]=x=>y("Double")),class:D(["layout-mode-style double",e(o).layout.layoutMode=="Double"?"active":""])},[qt,p("div",Wt,T(e(t)("layouts.Double column")),1)],2)]),_:1})]),_:1})]),n(u,{"border-style":"dashed"},{default:a(()=>[B(T(e(t)("layouts.overall situation")),1)]),_:1}),p("div",Ut,[n(w,{size:"large",label:e(t)("layouts.Dark mode")},{default:a(()=>[n(_t,{onClick:l[4]||(l[4]=x=>e(pt)())})]),_:1},8,["label"]),n(w,{label:e(t)("layouts.Background page switching animation")},{default:a(()=>[n(Y,{onChange:l[5]||(l[5]=x=>m(x,"mainAnimation")),"model-value":e(o).layout.mainAnimation,placeholder:e(t)("layouts.Please select an animation name")},{default:a(()=>[n(q,{label:"slide-right",value:"slide-right"}),n(q,{label:"slide-left",value:"slide-left"}),n(q,{label:"el-fade-in-linear",value:"el-fade-in-linear"}),n(q,{label:"el-fade-in",value:"el-fade-in"}),n(q,{label:"el-zoom-in-center",value:"el-zoom-in-center"}),n(q,{label:"el-zoom-in-top",value:"el-zoom-in-top"}),n(q,{label:"el-zoom-in-bottom",value:"el-zoom-in-bottom"})]),_:1},8,["model-value","placeholder"])]),_:1},8,["label"])]),n(u,{"border-style":"dashed"},{default:a(()=>[B(T(e(t)("layouts.sidebar")),1)]),_:1}),p("div",Ht,[n(w,{label:e(t)("layouts.Side menu bar background color")},{default:a(()=>[n(z,{onChange:l[6]||(l[6]=x=>b(x,"menuBackground")),"model-value":e(o).getColorVal("menuBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(w,{label:e(t)("layouts.Side menu text color")},{default:a(()=>[n(z,{onChange:l[7]||(l[7]=x=>b(x,"menuColor")),"model-value":e(o).getColorVal("menuColor")},null,8,["model-value"])]),_:1},8,["label"]),n(w,{label:e(t)("layouts.Side menu active item background color")},{default:a(()=>[n(z,{onChange:l[8]||(l[8]=x=>b(x,"menuActiveBackground")),"model-value":e(o).getColorVal("menuActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(w,{label:e(t)("layouts.Side menu active item text color")},{default:a(()=>[n(z,{onChange:l[9]||(l[9]=x=>b(x,"menuActiveColor")),"model-value":e(o).getColorVal("menuActiveColor")},null,8,["model-value"])]),_:1},8,["label"]),n(w,{label:e(t)("layouts.Show side menu top bar (logo bar)")},{default:a(()=>[n(g,{onChange:l[10]||(l[10]=x=>m(x,"menuShowTopBar")),"model-value":e(o).layout.menuShowTopBar},null,8,["model-value"])]),_:1},8,["label"]),n(w,{label:e(t)("layouts.Side menu top bar background color")},{default:a(()=>[n(z,{onChange:l[11]||(l[11]=x=>b(x,"menuTopBarBackground")),"model-value":e(o).getColorVal("menuTopBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(w,{label:e(t)("layouts.Side menu width (when expanded)")},{default:a(()=>[n(M,{onInput:l[12]||(l[12]=x=>m(x,"menuWidth")),type:"number",step:10,"model-value":e(o).layout.menuWidth},{append:a(()=>[B("px")]),_:1},8,["model-value"])]),_:1},8,["label"]),n(w,{label:e(t)("layouts.Side menu default icon")},{default:a(()=>[n(mt,{onChange:l[13]||(l[13]=x=>C(x,"menuDefaultIcon")),"model-value":e(o).layout.menuDefaultIcon},null,8,["model-value"])]),_:1},8,["label"]),n(w,{label:e(t)("layouts.Side menu horizontal collapse")},{default:a(()=>[n(g,{onChange:l[14]||(l[14]=x=>m(x,"menuCollapse")),"model-value":e(o).layout.menuCollapse},null,8,["model-value"])]),_:1},8,["label"]),n(w,{label:e(t)("layouts.Side menu accordion")},{default:a(()=>[n(g,{onChange:l[15]||(l[15]=x=>m(x,"menuUniqueOpened")),"model-value":e(o).layout.menuUniqueOpened},null,8,["model-value"])]),_:1},8,["label"])]),n(u,{"border-style":"dashed"},{default:a(()=>[B(T(e(t)("layouts.Top bar")),1)]),_:1}),p("div",Ot,[n(w,{label:e(t)("layouts.Top bar background color")},{default:a(()=>[n(z,{onChange:l[16]||(l[16]=x=>b(x,"headerBarBackground")),"model-value":e(o).getColorVal("headerBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(w,{label:e(t)("layouts.Top bar text color")},{default:a(()=>[n(z,{onChange:l[17]||(l[17]=x=>b(x,"headerBarTabColor")),"model-value":e(o).getColorVal("headerBarTabColor")},null,8,["model-value"])]),_:1},8,["label"]),n(w,{label:e(t)("layouts.Background color when hovering over the top bar")},{default:a(()=>[n(z,{onChange:l[18]||(l[18]=x=>b(x,"headerBarHoverBackground")),"model-value":e(o).getColorVal("headerBarHoverBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(w,{label:e(t)("layouts.Top bar menu active item background color")},{default:a(()=>[n(z,{onChange:l[19]||(l[19]=x=>b(x,"headerBarTabActiveBackground")),"model-value":e(o).getColorVal("headerBarTabActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(w,{label:e(t)("layouts.Top bar menu active item text color")},{default:a(()=>[n(z,{onChange:l[20]||(l[20]=x=>b(x,"headerBarTabActiveColor")),"model-value":e(o).getColorVal("headerBarTabActiveColor")},null,8,["model-value"])]),_:1},8,["label"])]),n(H,{onConfirm:c,title:e(t)("layouts.Are you sure you want to restore all configurations to the default values?")},{reference:a(()=>[p("div",Kt,[n(A,{class:"w80",type:"info"},{default:a(()=>[B(T(e(t)("layouts.Restore default")),1)]),_:1})])]),_:1},8,["title"])])]),_:1},8,["model"])]),_:1})]),_:1},8,["model-value","title"])])}}});const Xt=R(jt,[["__scopeId","data-v-bac0a267"]]),Gt={class:"command"},Yt={class:"task-opt"},Jt=["onClick"],Zt={class:"indent-2"},Qt={class:"package-manager-dialog-footer"},eo={class:"config-buttons"},to=I({__name:"index",setup(v){const{t}=ke(),o=xe(),r=K({terminalWarning:"",port:o.state.port,menuExpand:document.documentElement.clientWidth>1840}),s=Z(()=>{let l=o.state.port==""?"80":o.state.port;return l=="8000"?"php think run":"php think run -p "+l}),m=Z(()=>{let l=o.state.port==""?"":":"+o.state.port;return"http://localhost"+l+" "+t("terminal.or")+" http://"+t("terminal.Site domain name")+l}),b=l=>{Ve({port:l}).then(u=>{u.code==1?(o.changePort(l),_()):r.port=o.state.port}).catch(()=>{r.port=o.state.port})},y=l=>{let u=t("terminal.unknown"),$="info";switch(l){case F.Waiting:u=t("terminal.Waiting for execution"),$="info";break;case F.Connecting:u=t("terminal.Connecting"),$="warning";break;case F.Executing:u=t("terminal.Executing"),$="warning";break;case F.Success:u=t("terminal.Successful execution"),$="success";break;case F.Failed:u=t("terminal.Execution failed"),$="danger";break;case F.Unknown:u=t("terminal.Unknown execution result"),$="danger";break}return{statusText:u,statusType:$}},C=()=>{lt.confirm(t("terminal.Are you sure you want to republish?"),t("Reminder"),{confirmButtonText:t("Confirm"),cancelButtonText:t("Cancel"),type:"warning"}).then(()=>{o.addTaskPM("web-build")})},i=l=>{Ve({manager:l}).then(u=>{u.code==1&&o.changePackageManager(l)}),o.togglePackageManagerDialog(!1)},c=l=>{r.terminalWarning=l},_=()=>{Je()!=o.state.port?c(t("terminal.The current terminal is not running under the installation service, and some commands may not be executed")):c("")};return qe(()=>o.state.port,l=>{l!=r.port&&(r.port=l,_())}),X(()=>{_()}),(l,u)=>{const $=f("el-alert"),U=f("el-tag"),w=f("el-button"),q=f("Icon"),Y=f("el-card"),z=f("el-timeline-item"),g=f("el-timeline"),M=f("el-empty"),A=f("el-button-group"),H=f("el-dialog"),te=f("el-form"),L=ot("blur");return d(),S(E,null,[n(H,nt(l.$attrs,{modelValue:e(o).state.show,"onUpdate:modelValue":u[7]||(u[7]=h=>e(o).state.show=h),title:e(t)("terminal.Terminal"),class:"ba-terminal-dialog","append-to-body":!0}),{default:a(()=>[r.terminalWarning?(d(),k($,{key:0,class:"terminal-warning-alert",title:r.terminalWarning,type:"error"},null,8,["title"])):V("",!0),e(o).state.taskList.length?(d(),k(g,{key:1},{default:a(()=>[(d(!0),S(E,null,le(e(o).state.taskList,(h,x)=>(d(),k(z,{key:x,class:D(["task-item","task-status-"+h.status]),type:y(h.status).statusType,center:"",timestamp:h.createTime,placement:"top"},{default:a(()=>[n(Y,null,{default:a(()=>[p("div",null,[n(U,{type:y(h.status).statusType},{default:a(()=>[B(T(y(h.status).statusText),1)]),_:2},1032,["type"]),(h.status==e(F).Failed||h.status==e(F).Unknown)&&h.blockOnFailure?(d(),k(U,{key:0,class:"block-on-failure-tag",type:"warning"},{default:a(()=>[B(T(e(t)("terminal.Failure to execute this command will block the execution of the queue")),1)]),_:1})):V("",!0),h.status==e(F).Executing||h.status==e(F).Connecting?(d(),k(U,{key:1,class:"block-on-failure-tag",type:"danger"},{default:a(()=>[B(T(e(t)("terminal.Do not refresh the browser")),1)]),_:1})):V("",!0),p("span",Gt,T(h.command),1),p("div",Yt,[h.status==e(F).Failed||h.status==e(F).Unknown?O((d(),k(w,{key:0,title:e(t)("Retry"),size:"small",type:"warning",icon:"el-icon-RefreshRight",circle:"",onClick:ce=>e(o).retryTask(x)},null,8,["title","onClick"])),[[L]]):V("",!0),O(n(w,{onClick:ce=>e(o).delTask(x),title:e(t)("Delete"),size:"small",type:"danger",icon:"el-icon-Delete",circle:""},null,8,["onClick","title"]),[[L]])])]),h.status!=e(F).Waiting?(d(),S(E,{key:0},[h.status!=e(F).Connecting&&h.status!=e(F).Executing?(d(),S("div",{key:0,onClick:ce=>e(o).setTaskShowMessage(x),class:"toggle-message-display"},[p("span",null,T(e(t)("terminal.Command run log")),1),n(q,{name:h.showMessage?"el-icon-ArrowUp":"el-icon-ArrowDown",size:"16",color:"#909399"},null,8,["name"])],8,Jt)):V("",!0),h.status==e(F).Connecting||h.status==e(F).Executing||h.status>e(F).Executing&&h.showMessage?(d(),S("div",{key:1,class:D(["exec-message","exec-message-"+h.uuid])},[(d(!0),S(E,null,le(h.message,(ce,je)=>(d(),S("pre",{key:je,class:"message-item"},T(ce),1))),128))],2)):V("",!0)],64)):V("",!0)]),_:2},1024)]),_:2},1032,["class","type","timestamp"]))),128))]),_:1})):(d(),k(M,{key:2,"image-size":80,description:e(t)("terminal.No mission yet")},null,8,["description"])),n(A,null,{default:a(()=>[O((d(),k(w,{class:"terminal-menu-item",icon:"el-icon-MagicStick",onClick:u[0]||(u[0]=h=>e(o).addTaskPM("test",!1))},{default:a(()=>[B(T(e(t)("terminal.Test command")),1)]),_:1})),[[L]]),O((d(),k(w,{class:"terminal-menu-item",icon:"el-icon-Download",onClick:u[1]||(u[1]=h=>e(o).addTaskPM("web-install"))},{default:a(()=>[B(T(e(t)("terminal.Install dependent packages")),1)]),_:1})),[[L]]),O((d(),k(w,{class:"terminal-menu-item",icon:"el-icon-Sell",onClick:u[2]||(u[2]=h=>C())},{default:a(()=>[B(T(e(t)("terminal.Republish")),1)]),_:1})),[[L]]),r.menuExpand?(d(),S(E,{key:1},[O((d(),k(w,{class:"terminal-menu-item",icon:"el-icon-Delete",onClick:u[4]||(u[4]=h=>e(o).clearSuccessTask())},{default:a(()=>[B(T(e(t)("terminal.Clean up task list")),1)]),_:1})),[[L]]),O((d(),k(w,{class:"terminal-menu-item",icon:"el-icon-Switch",onClick:u[5]||(u[5]=h=>e(o).togglePackageManagerDialog(!0))},{default:a(()=>[B(T(e(t)("terminal.Package manager"))+" "+T(e(o).state.packageManager.toUpperCase()),1)]),_:1})),[[L]]),O((d(),k(w,{class:"terminal-menu-item",icon:"el-icon-Tools",onClick:u[6]||(u[6]=h=>e(o).toggleConfigDialog())},{default:a(()=>[B(T(e(t)("terminal.Terminal settings")),1)]),_:1})),[[L]])],64)):O((d(),k(w,{key:0,class:"terminal-menu-item",icon:"el-icon-Expand",onClick:u[3]||(u[3]=h=>r.menuExpand=!0)},null,512)),[[L]])]),_:1})]),_:1},16,["modelValue","title"]),n(H,{onClose:u[14]||(u[14]=h=>e(o).togglePackageManagerDialog(!1)),"model-value":e(o).state.showPackageManagerDialog,class:"ba-terminal-dialog",title:e(t)("terminal.Please select package manager"),center:""},{footer:a(()=>[p("div",Qt,[n(w,{onClick:u[8]||(u[8]=h=>i("npm"))},{default:a(()=>[B("npm")]),_:1}),n(w,{onClick:u[9]||(u[9]=h=>i("cnpm"))},{default:a(()=>[B("cnpm")]),_:1}),n(w,{onClick:u[10]||(u[10]=h=>i("pnpm"))},{default:a(()=>[B("pnpm")]),_:1}),n(w,{onClick:u[11]||(u[11]=h=>i("yarn"))},{default:a(()=>[B("yarn")]),_:1}),n(w,{onClick:u[12]||(u[12]=h=>i("ni"))},{default:a(()=>[B("ni")]),_:1}),n(w,{onClick:u[13]||(u[13]=h=>i("none"))},{default:a(()=>[B(T(e(t)("terminal.I want to execute the command manually")),1)]),_:1})])]),default:a(()=>[p("div",Zt,T(e(t)("terminal.Switch package manager title")),1)]),_:1},8,["model-value","title"]),n(H,{onClose:u[19]||(u[19]=h=>e(o).toggleConfigDialog(!1)),"model-value":e(o).state.showConfig,class:"ba-terminal-dialog",title:e(t)("terminal.Terminal settings")},{default:a(()=>[n(te,{"label-position":"top"},{default:a(()=>[n(ie,{label:e(t)("terminal.Install service port"),modelValue:r.port,"onUpdate:modelValue":u[15]||(u[15]=h=>r.port=h),type:"number","input-attr":{onChange:b},placeholder:e(t)("terminal.The port number to start the installation service (this port needs to be opened for external network access)")},null,8,["label","modelValue","input-attr","placeholder"]),n(ie,{label:e(t)("terminal.Installation service startup command"),modelValue:s.value,"onUpdate:modelValue":u[16]||(u[16]=h=>s.value=h),type:"string","input-attr":{disabled:!0},attr:{blockHelp:e(t)("terminal.Please execute this command to start the service (add Su under Linux)")}},null,8,["label","modelValue","attr"]),n(ie,{label:e(t)("terminal.Installation service URL"),modelValue:m.value,"onUpdate:modelValue":u[17]||(u[17]=h=>m.value=h),type:"string","input-attr":{disabled:!0},attr:{blockHelp:e(t)("terminal.Please access the site through the installation service URL (except in debug mode)")}},null,8,["label","modelValue","attr"])]),_:1}),n(ie,{label:e(t)("terminal.Clean up successful tasks when starting a new task"),"model-value":e(o).state.automaticCleanupTask,type:"radio",data:{content:{0:e(t)("Disable"),1:e(t)("Enable")},childrenAttr:{border:!0}},"input-attr":{onChange:e(o).changeAutomaticCleanupTask}},null,8,["label","model-value","data","input-attr"]),p("div",eo,[n(w,{onClick:u[18]||(u[18]=h=>e(o).toggleConfigDialog(!1))},{default:a(()=>[B(T(e(t)("terminal.Back to terminal")),1)]),_:1})])]),_:1},8,["model-value","title"])],64)}}});const oo=R(to,[["__scopeId","data-v-30ed251f"]]),no=["src"],lo={class:"admin-name"},ao={class:"admin-info-base"},so=["src"],ro={class:"admin-info-other"},uo={class:"admin-info-name"},co={class:"admin-info-lasttime"},io={class:"admin-info-footer"},mo=I({__name:"navMenus",setup(v){j(c=>({b1ac3922:e(r).getColorVal("headerBarBackground"),"5189318f":e(r).getColorVal("headerBarTabColor"),"1b882817":e(r).getColorVal("headerBarHoverBackground")}));const{t}=ke(),o=De(),r=N(),s=xe(),m=K({isFullScreen:!1,currentNavMenu:"",showLayoutDrawer:!1}),b=(c,_)=>{m.currentNavMenu=c?_:""},y=()=>{if(!de.isEnabled)return at.warning(t("layouts.Full screen is not supported")),!1;de.toggle(),de.onchange(()=>{m.isFullScreen=de.isFullscreen})},C=()=>{ft().then(()=>{J.remove(be),Ee.go(0)})},i=c=>{if(c=="storage"||c=="all"){const _=J.get(be),l=J.get(Ie);if(oe.clear(),J.clear(),J.set(be,_),J.set(Ie,l),c=="storage")return}Qe(c).then(()=>{})};return(c,_)=>{const l=f("Icon"),u=f("el-dropdown-item"),$=f("el-dropdown-menu"),U=f("el-dropdown"),w=f("el-badge"),q=f("el-avatar"),Y=f("el-button"),z=f("el-popover");return d(),S("div",{class:D(["nav-menus",e(r).layout.layoutMode])},[n(U,{onVisibleChange:_[0]||(_[0]=g=>b(g,"lang")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:a(()=>[n($,{class:"dropdown-menu-box"},{default:a(()=>[(d(!0),S(E,null,le(e(r).lang.langArray,g=>(d(),k(u,{key:g.name,onClick:M=>e(Ze)(g.name)},{default:a(()=>[B(T(g.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:a(()=>[p("div",{class:D(["nav-menu-item pt2",m.currentNavMenu=="lang"?"hover":""])},[n(l,{color:e(r).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-lang",size:"18"},null,8,["color"])],2)]),_:1}),p("div",{onClick:y,class:D(["nav-menu-item",m.isFullScreen?"hover":""])},[m.isFullScreen?(d(),k(l,{key:0,color:e(r).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-full-screen-cancel",size:"18"},null,8,["color"])):(d(),k(l,{key:1,color:e(r).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-FullScreen",size:"18"},null,8,["color"]))],2),e(o).super?(d(),S("div",{key:0,onClick:_[1]||(_[1]=g=>e(s).toggle()),class:"nav-menu-item pt2"},[n(w,{"is-dot":e(s).state.showDot},{default:a(()=>[n(l,{color:e(r).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-terminal",size:"26"},null,8,["color"])]),_:1},8,["is-dot"])])):V("",!0),e(o).super?(d(),k(U,{key:1,onVisibleChange:_[5]||(_[5]=g=>b(g,"clear")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:a(()=>[n($,{class:"dropdown-menu-box"},{default:a(()=>[n(u,{onClick:_[2]||(_[2]=g=>i("tp"))},{default:a(()=>[B(T(e(t)("utils.Clean up system cache")),1)]),_:1}),n(u,{onClick:_[3]||(_[3]=g=>i("storage"))},{default:a(()=>[B(T(e(t)("utils.Clean up browser cache")),1)]),_:1}),n(u,{onClick:_[4]||(_[4]=g=>i("all")),divided:""},{default:a(()=>[B(T(e(t)("utils.Clean up all cache")),1)]),_:1})]),_:1})]),default:a(()=>[p("div",{class:D(["nav-menu-item",m.currentNavMenu=="clear"?"hover":""])},[n(l,{color:e(r).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Delete",size:"18"},null,8,["color"])],2)]),_:1})):V("",!0),n(z,{onShow:_[6]||(_[6]=g=>b(!0,"adminInfo")),onHide:_[7]||(_[7]=g=>b(!1,"adminInfo")),placement:"bottom-end","hide-after":0,width:260,trigger:"click","popper-class":"admin-info-box"},{reference:a(()=>[p("div",{class:D(["admin-info",m.currentNavMenu=="adminInfo"?"hover":""])},[n(q,{size:25,fit:"fill"},{default:a(()=>[p("img",{src:e(o).avatar,alt:""},null,8,no)]),_:1}),p("div",lo,T(e(o).nickname),1)],2)]),default:a(()=>[p("div",null,[p("div",ao,[n(q,{size:70,fit:"fill"},{default:a(()=>[p("img",{src:e(o).avatar,alt:""},null,8,so)]),_:1}),p("div",ro,[p("div",uo,T(e(o).nickname),1),p("div",co,T(e(o).last_login_time),1)])]),p("div",io,[n(Y,{onClick:C,type:"danger",plain:""},{default:a(()=>[B(T(e(t)("layouts.cancellation")),1)]),_:1})])])]),_:1}),p("div",{onClick:_[8]||(_[8]=g=>e(r).setLayout("showDrawer",!0)),class:"nav-menu-item"},[n(l,{color:e(r).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"fa fa-cogs",size:"18"},null,8,["color"])]),n(Xt),n(oo)],2)}}});const fe=R(mo,[["__scopeId","data-v-cbcb5f4b"]]),_o={class:"nav-bar"},po=I({__name:"default",setup(v){j(o=>({"341e91f0":e(t).getColorVal("headerBarTabColor"),"7d0afb8a":e(t).getColorVal("headerBarTabActiveColor"),"5eccd556":e(t).getColorVal("headerBarTabActiveBackground")}));const t=N();return(o,r)=>(d(),S("div",_o,[n(Ke),n(fe)]))}});const fo=R(po,[["__scopeId","data-v-8d90b156"]]),vo={class:"nav-bar"},go={key:0,class:"unfold"},yo=I({__name:"classic",setup(v){j(r=>({"88b2895c":e(t).getColorVal("headerBarBackground"),"6a10a632":e(t).getColorVal("headerBarTabColor"),d50d5368:e(t).getColorVal("headerBarTabActiveColor"),"4c5473d8":e(t).getColorVal("headerBarHoverBackground"),a7c0b85a:e(t).getColorVal("headerBarTabActiveBackground")}));const t=N(),o=()=>{it("ba-aside-menu-shade",()=>{t.setLayout("menuCollapse",!0)}),t.setLayout("menuCollapse",!1)};return(r,s)=>{const m=f("Icon");return d(),S("div",vo,[e(t).layout.shrink&&e(t).layout.menuCollapse?(d(),S("div",go,[n(m,{onClick:o,name:"fa fa-indent",color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["color"])])):V("",!0),e(t).layout.shrink?V("",!0):(d(),k(Ke,{key:1})),n(fe)])}}});const bo=R(yo,[["__scopeId","data-v-af750839"]]),ho={class:"layouts-menu-horizontal"},Co={key:0,class:"menu-horizontal-logo"},ko=I({__name:"menuHorizontal",setup(v){j(i=>({"229d1d8d":e(o).getColorVal("headerBarHoverBackground"),"33daf554":e(o).getColorVal("menuBackground"),"896b622e":e(o).getColorVal("menuColor"),"3f6959c3":e(o).getColorVal("menuActiveColor"),bc6b9a88:e(o).getColorVal("menuActiveBackground")}));const t=ae(),o=N(),r=P(),s=ee(),m=K({menuKey:me(),defaultActive:""}),b=Z(()=>(m.menuKey=me(),r.state.tabsViewRoutes)),y=i=>{m.defaultActive=i.path},C=()=>{Q(()=>{var c;let i=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!i)return!1;(c=t.value)==null||c.setScrollTop(i.offsetTop)})};return X(()=>{y(s),C()}),ue(i=>{y(i)}),(i,c)=>{const _=f("el-menu"),l=f("el-scrollbar");return d(),S("div",ho,[e(o).layout.menuShowTopBar?(d(),S("div",Co,[n(He)])):V("",!0),n(l,{ref_key:"horizontalMenusRef",ref:t,class:"horizontal-menus-scrollbar"},{default:a(()=>[(d(),k(_,{class:"menu-horizontal",mode:"horizontal","default-active":m.defaultActive,key:m.menuKey},{default:a(()=>[n(_e,{menus:b.value},null,8,["menus"])]),_:1},8,["default-active"]))]),_:1},512),n(fe)])}}});const xo=R(ko,[["__scopeId","data-v-6aa3158a"]]),wo={class:"layouts-menu-horizontal-double"},To=I({__name:"double",setup(v){j(i=>({"173d9c9f":e(o).getColorVal("menuBackground"),"62de0e00":e(o).getColorVal("menuColor"),"33a12b9a":e(o).getColorVal("menuActiveColor"),"68a22176":e(o).getColorVal("menuActiveBackground")}));const t=ae(),o=N(),r=P(),s=ee(),m=K({menuKey:me(),defaultActive:""}),b=Z(()=>(m.menuKey=me(),r.state.tabsViewRoutes)),y=i=>{$e(i.path,r.state.tabsViewRoutes)&&(m.defaultActive=i.path)},C=()=>{Q(()=>{var c;let i=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!i)return!1;(c=t.value)==null||c.setScrollTop(i.offsetTop)})};return X(()=>{y(s),C()}),ue(i=>{y(i)}),(i,c)=>{const _=f("el-menu"),l=f("el-scrollbar");return d(),S("div",wo,[n(l,{ref_key:"horizontalMenusRef",ref:t,class:"double-menus-scrollbar"},{default:a(()=>[(d(),k(_,{class:"menu-horizontal",mode:"horizontal","default-active":m.defaultActive,key:m.menuKey},{default:a(()=>[n(_e,{menus:b.value},null,8,["menus"])]),_:1},8,["default-active"]))]),_:1},512),n(fe)])}}});const So=R(To,[["__scopeId","data-v-df6db00e"]]),Bo=I({name:"layout/header",components:{DefaultNavBar:fo,ClassicNavBar:bo,StreamlineNavBar:xo,DoubleNavBar:So},__name:"header",setup(v){const t=N(),o=P();return(r,s)=>{const m=f("el-header");return e(o).state.tabFullScreen?V("",!0):(d(),k(m,{key:0,class:"layout-header"},{default:a(()=>[(d(),k(Be(e(t).layout.layoutMode+"NavBar")))]),_:1}))}}});const ve=R(Bo,[["__scopeId","data-v-9014eea9"]]),$o=I({name:"layout/main",__name:"main",setup(v){const{proxy:t}=Oe(),o=ee(),r=N(),s=P(),m=K({componentKey:o.path,keepAliveComponentNameList:[]}),b=function(y){if(y){if(m.keepAliveComponentNameList.find(i=>i===y))return;m.keepAliveComponentNameList.push(y)}};return We(()=>{t.eventBus.on("onTabViewRefresh",y=>{m.keepAliveComponentNameList=m.keepAliveComponentNameList.filter(C=>y.meta.keepalive!==C),m.componentKey="",Q(()=>{m.componentKey=y.path,b(y.meta.keepalive)})}),t.eventBus.on("onTabViewClose",y=>{m.keepAliveComponentNameList=m.keepAliveComponentNameList.filter(C=>y.meta.keepalive!==C)})}),st(()=>{t.eventBus.off("onTabViewRefresh"),t.eventBus.off("onTabViewClose")}),X(()=>{var y,C;typeof((y=s.state.activeRoute)==null?void 0:y.meta.keepalive)=="string"&&b((C=s.state.activeRoute)==null?void 0:C.meta.keepalive)}),qe(()=>o.path,()=>{var y,C;m.componentKey=o.path,typeof((y=s.state.activeRoute)==null?void 0:y.meta.keepalive)=="string"&&b((C=s.state.activeRoute)==null?void 0:C.meta.keepalive)}),(y,C)=>{const i=f("router-view"),c=f("el-scrollbar"),_=f("el-main");return d(),k(_,{class:"layout-main"},{default:a(()=>[n(c,{class:"layout-main-scrollbar",style:ne(e(gt)()),ref:"mainScrollbarRef"},{default:a(()=>[n(i,null,{default:a(({Component:l})=>[n(Se,{name:e(r).layout.mainAnimation,mode:"out-in"},{default:a(()=>[(d(),k(rt,{include:m.keepAliveComponentNameList},[(d(),k(Be(l),{key:m.componentKey}))],1032,["include"]))]),_:2},1032,["name"])]),_:1})]),_:1},8,["style"])]),_:1})}}});const ge=R($o,[["__scopeId","data-v-0fbb6b18"]]),Mo=v=>(we("data-v-0aa634f1"),v=v(),Te(),v),Vo=["title","onMouseover","onMouseout"],Io=["onClick"],Ao=Mo(()=>p("div",{class:"close-full-screen-on"},null,-1)),Ro=I({__name:"closeFullScreen",setup(v){const t=P(),o=K({closeBoxTop:20});X(()=>{setTimeout(()=>{o.closeBoxTop=-30},300)});const r=()=>{o.closeBoxTop=20},s=()=>{o.closeBoxTop=-30},m=()=>{t.setFullScreen(!1)};return(b,y)=>{const C=f("Icon");return d(),S("div",{title:b.$t("layouts.Exit full screen"),onMouseover:se(r,["stop"]),onMouseout:se(s,["stop"])},[p("div",{onClick:se(m,["stop"]),class:"close-full-screen",style:ne({top:o.closeBoxTop+"px"})},[n(C,{name:"el-icon-Close"})],12,Io),Ao],40,Vo)}}});const ye=R(Ro,[["__scopeId","data-v-0aa634f1"]]),Fo=I({__name:"default",setup(v){const t=P();return(o,r)=>{const s=f("el-container");return d(),S(E,null,[n(s,{class:"layout-container"},{default:a(()=>[n(Me),n(s,{class:"content-wrapper"},{default:a(()=>[n(ve),n(ge)]),_:1})]),_:1}),e(t).state.tabFullScreen?(d(),k(ye,{key:0})):V("",!0)],64)}}});const zo=R(Fo,[["__scopeId","data-v-59d252c1"]]),Lo=I({__name:"classic",setup(v){const t=P();return(o,r)=>{const s=f("el-container");return d(),S(E,null,[n(s,{class:"layout-container"},{default:a(()=>[n(Me),n(s,{class:"content-wrapper"},{default:a(()=>[n(ve),n(ge)]),_:1})]),_:1}),e(t).state.tabFullScreen?(d(),k(ye,{key:0})):V("",!0)],64)}}});const Do=R(Lo,[["__scopeId","data-v-d96a73d9"]]),Eo=I({__name:"streamline",setup(v){const t=P();return(o,r)=>{const s=f("el-container");return d(),S(E,null,[n(s,{class:"layout-container"},{default:a(()=>[n(s,{class:"content-wrapper"},{default:a(()=>[n(ve),n(ge)]),_:1})]),_:1}),e(t).state.tabFullScreen?(d(),k(ye,{key:0})):V("",!0)],64)}}});const No=R(Eo,[["__scopeId","data-v-fcdc1bd3"]]),Po=I({__name:"double",setup(v){const t=P();return(o,r)=>{const s=f("el-container");return d(),S(E,null,[n(s,{class:"layout-container"},{default:a(()=>[n(Me),n(s,{class:"content-wrapper"},{default:a(()=>[n(ve),n(ge)]),_:1})]),_:1}),e(t).state.tabFullScreen?(d(),k(ye,{key:0})):V("",!0)],64)}}});const qo=R(Po,[["__scopeId","data-v-d08319bd"]]),Jo=I({components:{Default:zo,Classic:Do,Streamline:No,Double:qo},__name:"index",setup(v){const t=xe(),o=P(),r=N(),s=ee(),m=Le(),b=De();X(()=>{if(!b.token)return Ee.push({name:"adminLogin"});y(),i(),he(window,"resize",i)}),We(()=>{C(),he(window,"resize",C)});const y=()=>{vt().then(c=>{if(m.dataFill(c.data.siteConfig),t.changePort(c.data.terminal.installServicePort),t.changePackageManager(c.data.terminal.npmPackageManager),b.dataFill(c.data.adminInfo),c.data.menus){if(dt(c.data.menus),s.params.to){const l=JSON.parse(s.params.to);if(l.path!=et.path){let u=ut(l.query)?{}:l.query;Ce({path:l.path,query:u});return}}let _=Ue(o.state.tabsViewRoutes);_&&Ce(_.path)}})},C=()=>{let c={layoutMode:r.layout.layoutMode,menuCollapse:r.layout.menuCollapse},_=oe.get(re);if(_||oe.set(re,c),document.body.clientWidth<1024)r.setLayout("menuCollapse",!0),r.setLayout("shrink",!0),r.setLayoutMode("Classic");else{let u=_||c;r.setLayout("menuCollapse",u.menuCollapse),r.setLayout("shrink",!1),r.setLayoutMode(u.layoutMode)}},i=()=>{const c=document.querySelector(".nav-tabs");if(!c)return;const _=document.querySelector(".nav-bar"),l=document.querySelector(".nav-menus"),u=_.offsetWidth-(l.offsetWidth+20);c.style.width=u.toString()+"px",console.log("侧边栏宽度="+c.style.width),console.log("侧边栏宽度="+l.offsetWidth),console.log("侧边栏宽度="+_.offsetWidth),console.log("侧边栏宽度="+c.offsetWidth)};return(c,_)=>(d(),k(Be(e(r).layout.layoutMode)))}});export{Jo as default};
