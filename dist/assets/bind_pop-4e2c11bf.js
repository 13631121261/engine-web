import{h as E,w as A,ar as L,r as k,q as s,a8 as c,o as m,P as _,Q as n,a9 as f,k as C,Z as b,V as g,z as a,m as w,l as B,p as i,a3 as P,$ as R,X as j,Y as Q,a7 as X,K as Y}from"./vue-974988d6.js";import{a as Z,c as G,_ as H}from"./index-1515df1a.js";import{b as v}from"./validate-8bf15b2e.js";import{F as u}from"./index-a773531e.js";import{h as J}from"./index-24a0fd9a.js";import"./index-11ae6512.js";import"./index-7182f49c.js";const M={class:"title"},ee=E({__name:"bind_pop",setup(le){Z(),A();const l=L("baTable"),{t:r}=G(),h=k({mac:[v({name:"required",title:r("bind_tag")})],idcard:[v({name:"required",title:r("Consuming_who")})],area_id:[v({name:"required",title:r("select_area")})]}),y=A(),e=k({mac:"",idcard:"-1",type:"AOA",tag_type:5,url:"/userApi/beacon/index1?type=5",sn:"",area_id:-1,open_run:0,fence_id:-1}),K=[{value:"5",label:"AOA"},{value:"1",label:"KTBB818"},{value:"2",label:"KTBB818-K"},{value:"3",label:"KTBB818-A"},{value:"4",label:"KTBB818-KA"}];function V(){var d;(d=y.value)==null||d.validate(o=>{o&&J(e).then(p=>{p.code==1&&(Y({message:p.msg,type:"success"}),l.form.operate="",l.getIndex())})})}function F(){l.form.items.idcard!=null&&l.form.items.idcard!="-1"&&l.form.items.idcard!=""?(e.idcard=l.form.items.idcard,e.area_id=l.form.items.area_id,e.fence_id=l.form.items.fence_id):e.idcard="-1",l.form.items.bind_mac!=null?e.mac=l.form.items.bind_mac:e.mac="",e.sn=l.form.items.sn,e.open_run=l.form.items.open_run,e.type="AOA",e.tag_type=5,e.url="/userApi/beacon/index1?type=5",console.log(e)}function T(d){console.log("改变"+d),e.mac="",e.tag_type=d,e.url="/userApi/beacon/index1?type="+d}function S(){return e.tag_type!=5}return(d,o)=>{const p=s("el-option"),U=s("el-select"),z=s("el-form-item"),D=s("el-form"),I=s("el-scrollbar"),x=s("el-button"),N=s("el-dialog"),q=c("drag"),$=c("zoom"),O=c("loading"),W=c("blur");return m(),_(N,{class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":["bind"].includes(a(l).form.operate),onClose:a(l).toggleForm,"destroy-on-close":!0,open:F()},{header:n(()=>[f((m(),C("div",M,[b(g(a(r)("bind")),1)])),[[q,[".ba-operate-dialog",".el-dialog__header"]],[$,".ba-operate-dialog"]])]),footer:n(()=>[w("div",{style:B("width: calc(100% - "+a(l).form.labelWidth/1.8+"px)")},[i(x,{onClick:o[7]||(o[7]=t=>a(l).toggleForm(""))},{default:n(()=>[b(g(a(r)("Cancel")),1)]),_:1}),f((m(),_(x,{loading:a(l).form.submitLoading,onClick:o[8]||(o[8]=t=>V()),type:"primary"},{default:n(()=>[b(g(a(r)("Save")),1)]),_:1},8,["loading"])),[[W]])],4)]),default:n(()=>[f((m(),_(I,{class:"ba-table-form-scrollbar"},{default:n(()=>[w("div",{class:P(["ba-operate-form","ba-"+a(l).form.operate+"-form"]),style:B("width: calc(100% - "+a(l).form.labelWidth/2+"px)")},[a(l).form.loading?X("",!0):(m(),_(D,{key:0,ref_key:"ruleFormRef",ref:y,onKeyup:o[6]||(o[6]=R(t=>V(),["enter"])),model:e,"label-position":"right","label-width":a(l).form.labelWidth+"px",rules:h},{default:n(()=>[i(z,{label:a(r)("tag_type")},{default:n(()=>[i(U,{modelValue:e.type,"onUpdate:modelValue":o[0]||(o[0]=t=>e.type=t),onChange:T},{default:n(()=>[(m(),C(j,null,Q(K,t=>i(p,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"]),i(u,{label:a(r)("open_run"),type:"switch",modelValue:e.open_run,"onUpdate:modelValue":o[1]||(o[1]=t=>e.open_run=t),"input-attr":{disabled:S()}},null,8,["label","modelValue","input-attr"]),i(u,{prop:"mac",label:a(r)("bind_tag"),type:"remoteSelect",modelValue:e.mac,"onUpdate:modelValue":o[2]||(o[2]=t=>e.mac=t),"input-attr":{multiple:!1,pk:"mac",field:"mac","remote-url":e.url},placeholder:a(r)("bind_tag")},null,8,["label","modelValue","input-attr","placeholder"]),i(u,{prop:"idcard",label:a(r)("Consuming_who"),type:"remoteSelect",modelValue:e.idcard,"onUpdate:modelValue":o[3]||(o[3]=t=>e.idcard=t),"input-attr":{multiple:!1,pk:"idcard",field:"name","remote-url":"/userApi/Person/index1"},placeholder:a(r)("Consuming_who")},null,8,["label","modelValue","placeholder"]),i(u,{label:a(r)("select_area"),type:"remoteSelect",modelValue:e.area_id,"onUpdate:modelValue":o[4]||(o[4]=t=>e.area_id=t),"input-attr":{multiple:!1,pk:"id",field:"name","remote-url":"/userApi/area/index1"},placeholder:a(r)("select_area")},null,8,["label","modelValue","placeholder"]),i(u,{label:a(r)("fence_name"),type:"remoteSelect",modelValue:e.fence_id,"onUpdate:modelValue":o[5]||(o[5]=t=>e.fence_id=t),"input-attr":{multiple:!1,pk:"id",field:"name","remote-url":"/userApi/fence/index1"}},null,8,["label","modelValue"])]),_:1},8,["model","label-width","rules"]))],6)]),_:1})),[[O,a(l).form.loading]])]),_:1},8,["model-value","onClose","open"])}}});const se=H(ee,[["__scopeId","data-v-6add98e7"]]);export{se as default};
