import{a as E,d as x,c as X}from"./index-1515df1a.js";import{h as Y,w as p,r as Z,F as j,q as m,o as _,k as v,m as i,p as l,Q as u,Z as n,P as B,X as H,Y as M,a7 as L,V as J,K as f}from"./vue-974988d6.js";const h="/userApi";function O(){return E(),x({url:h+"/SystemGet",method:"get"})}function $(g={}){return x({url:h+"/SystemSet",method:"post",data:g})}function ee(){return E(),x({url:h+"/configGet",method:"get"})}function le(g,y,w,N){return x({url:h+"/configSet",method:"get",params:{A_Rssi:g,N:y,used:w,z:N}})}function te(g){return x({url:h+"/setDownloadUrl",method:"get",params:{host:g}})}const ae={style:{"margin-top":"10px"}},oe={style:{"background-color":"white","box-shadow":"var(--el-box-shadow-dark)",width:"98%",height:"98%",position:"absolute","margin-left":"1%","margin-bottom":"10px"}},ue={style:{"margin-left":"20px"}},ne={style:{"margin-left":"10px"}},se={style:{"margin-left":"30px"}},de=i("br",null,null,-1),ie=i("br",null,null,-1),re=i("br",null,null,-1),pe={key:0},me={key:1},_e=i("br",null,null,-1),ye={key:0},ve=i("br",null,null,-1),fe=i("br",null,null,-1),ge=i("br",null,null,-1),ce=i("br",null,null,-1),Ve=i("div",null,null,-1),be=i("div",null," 此时间值，用于判断设备离线，应用于系统内全部硬件产品。比如网关、信标。如果系统检测到设备没有数据更新，持续时间超过此设置时间，则判断为离线状态。 ",-1),xe=i("div",null," 设置定位网关的高度值，以及对应的定位设备在距离网关1米范围的信号强度，以及环境因子值：N。设置一次网关高度，就会把全部网关的高度重置为当前设置值。 ",-1),he=i("div",null," 设置关于本机服务器的一个可供给网关访问的下载地址，因为本机服务器可能涉及的IP较多，不能自主获取，目前只好通过手动设置的方式来进行设置。 ",-1),Ce=Y({__name:"index",setup(g){const{t:y}=X(),w=p(["0"]);p("emqx"),p(1883),p(3),p("GwData"),p("SrvData");const N=a=>{console.log(a),a||(o.value.low_p=0,o.value.tag_l=0,o.value.person_l=0,o.value.device_l=0,o.value.detach=0,o.value.move=0,o.value.offline=0,o.value.online=0,o.value.fence=0)};function d(a){return a.stopPropagation()}const k=p(0),C=p("不建议设置"),U=p(-40),P=p(0),V=p(!1),z=[{value:"0",label:"0"},{value:"1",label:"1"},{value:"2",label:"2"}],A=[{value:0,label:"udp"},{value:1,label:"mqtt"}],o=Z({value:{id:0,udp:"",name:"",createtime:0,userkey:"",host:"",port:"",sub:"",user:"",pub:"",password:"",qos:0,relay_type:0,r_host:"",r_port:1883,r_sub:"",r_pub:"",r_user:"",r_qos:0,r_password:"",relay_status:0,person_l:0,device_l:0,tag_l:0,online:0,offline:0,fence:0,low_p:0,detach:0,move:0,line_time:3,mqtt_status:!1}});j(()=>{O().then(a=>{a.code==1&&(o.value={id:a.data.id,udp:a.data.udp,name:"",createtime:a.data.createtime,userkey:a.data.userkey,host:a.data.host,port:a.data.port,sub:a.data.sub,user:a.data.user,pub:a.data.pub,password:a.data.password,qos:a.data.qos,relay_type:a.data.relay_type,r_host:a.data.r_host,r_port:a.data.r_port,r_sub:a.data.r_sub,r_pub:a.data.r_pub,r_user:a.data.r_user,r_password:a.data.r_password,r_qos:a.data.r_qos,relay_status:a.data.relay_status,person_l:a.data.person_l,device_l:a.data.device_l,tag_l:a.data.tag_l,online:a.data.online,offline:a.data.offline,fence:a.data.fence,low_p:a.data.low_p,detach:a.data.detach,move:a.data.move,line_time:a.data.line_time,mqtt_status:a.mqtt_status},console.log(o))}),ee().then(a=>{console.log(a),a.code==1&&(U.value=a.data.arssi,P.value=a.data.z,k.value=a.data.n,a.data.used==0?V.value=!1:V.value=!0)})});const G=a=>a+"分钟",S=a=>($(o.value).then(t=>{t.code==1?f({title:y("ok"),message:t.msg,position:"bottom-right",type:"success",duration:1e3,dangerouslyUseHTMLString:!0}):f({title:y("fail"),message:t.msg,position:"bottom-right",type:"error",duration:1e3,dangerouslyUseHTMLString:!0})}),a.stopPropagation()),F=a=>(C.value.startsWith("http://")?te(C.value).then(t=>{t.code==1?f({title:y("ok"),message:t.msg,position:"bottom-right",type:"success",duration:1e3,dangerouslyUseHTMLString:!0}):f({title:y("fail"),message:t.msg,position:"bottom-right",type:"error",duration:1e3,dangerouslyUseHTMLString:!0})}):f({title:y("fail"),message:"地址错误",position:"bottom-right",type:"error",duration:1e3,dangerouslyUseHTMLString:!0}),a.stopPropagation()),I=a=>{var t=0;return V.value?t=1:t=0,le(U.value,k.value,t,P.value).then(s=>{s.code==1?f({title:y("ok"),message:s.msg,position:"bottom-right",type:"success",duration:1e3,dangerouslyUseHTMLString:!0}):f({title:y("fail"),message:s.msg,position:"bottom-right",type:"error",duration:1e3,dangerouslyUseHTMLString:!0})}),a.stopPropagation()},K=[{value:"-31",label:"-31"},{value:"-32",label:"-32"},{value:"-33",label:"-33"},{value:"-34",label:"-34"},{value:"-35",label:"-35"},{value:"-36",label:"-36"},{value:"-37",label:"-37"},{value:"-38",label:"-38"},{value:"-39",label:"-39"},{value:"-40",label:"-40"},{value:"-41",label:"-41"},{value:"-42",label:"-42"},{value:"-43",label:"-43"},{value:"-44",label:"-44"},{value:"-45",label:"-45"}];return(a,t)=>{const s=m("el-text"),r=m("el-input"),c=m("el-button"),D=m("el-tag"),q=m("el-option"),T=m("el-select"),b=m("el-collapse-item"),Q=m("el-switch"),R=m("el-slider"),W=m("el-collapse");return _(),v("div",ae,[i("div",oe,[i("div",ue,[l(W,{modelValue:w.value,"onUpdate:modelValue":t[23]||(t[23]=e=>w.value=e)},{default:u(()=>[l(b,{name:"1"},{title:u(()=>[l(s,null,{default:u(()=>[n("MQTT Broker ")]),_:1}),l(s,{style:{"margin-left":"10px"},type:"primary"},{default:u(()=>[n("Host:")]),_:1}),l(r,{modelValue:o.value.host,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value.host=e),onClick:d,style:{width:"180px"},placeholder:"Please input"},null,8,["modelValue"]),l(s,{style:{"margin-left":"10px"},type:"primary"},{default:u(()=>[n("Port:")]),_:1}),l(r,{modelValue:o.value.port,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value.port=e),onClick:d,style:{width:"180px"},placeholder:"Please input"},null,8,["modelValue"]),l(s,{style:{"margin-left":"10px"},type:"primary"},{default:u(()=>[n("Subscription Topic:")]),_:1}),l(r,{modelValue:o.value.sub,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value.sub=e),onClick:d,style:{width:"180px"},placeholder:"Please input"},null,8,["modelValue"]),l(s,{style:{"margin-left":"10px"},type:"primary"},{default:u(()=>[n("Publish Topic:")]),_:1}),l(r,{modelValue:o.value.pub,"onUpdate:modelValue":t[3]||(t[3]=e=>o.value.pub=e),onClick:d,style:{width:"180px"},placeholder:"Please input"},null,8,["modelValue"]),l(c,{type:"primary",style:{"margin-left":"10px"},onClick:S},{default:u(()=>[n("设置")]),_:1}),i("div",ne,[o.value.mqtt_status?(_(),B(D,{key:0,type:"success"},{default:u(()=>[n("Connect Success")]),_:1})):(_(),B(D,{key:1,type:"danger"},{default:u(()=>[n("Connect Fail")]),_:1}))])]),default:u(()=>[i("div",se,[de,n(" 设置平台的目标MQTT地址以及相关订阅参数，如果你需要设置更详细的信息，请在这里设置。 "),ie,re,l(s,{type:"primary"},{default:u(()=>[n("User:")]),_:1}),l(r,{modelValue:o.value.user,"onUpdate:modelValue":t[4]||(t[4]=e=>o.value.user=e),onClick:d,style:{width:"180px"},placeholder:"Please input"},null,8,["modelValue"]),l(s,{style:{"margin-left":"10px"},type:"primary"},{default:u(()=>[n("Password:")]),_:1}),l(r,{modelValue:o.value.password,"onUpdate:modelValue":t[5]||(t[5]=e=>o.value.password=e),onClick:d,style:{width:"180px"},placeholder:"Please input"},null,8,["modelValue"]),l(s,{style:{"margin-left":"10px"},type:"primary"},{default:u(()=>[n("QoS:")]),_:1}),l(T,{modelValue:o.value.qos,"onUpdate:modelValue":t[6]||(t[6]=e=>o.value.qos=e),placeholder:"0",size:"large",style:{width:"240px"}},{default:u(()=>[(_(),v(H,null,M(z,e=>l(q,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),l(c,{type:"primary",onClick:S,style:{"margin-left":"10px"}},{default:u(()=>[n("设置")]),_:1})])]),_:1}),l(b,{name:"2"},{title:u(()=>[l(s,null,{default:u(()=>[n("数据推送")]),_:1}),l(Q,{style:{"margin-left":"10px"},class:"ml-2","active-value":1,"inactive-value":0,onClick:d,onChange:N,modelValue:o.value.relay_status,"onUpdate:modelValue":t[7]||(t[7]=e=>o.value.relay_status=e)},null,8,["modelValue"]),l(T,{modelValue:o.value.relay_type,"onUpdate:modelValue":t[8]||(t[8]=e=>o.value.relay_type=e),placeholder:"0",size:"large",style:{width:"100px","margin-left":"10px"}},{default:u(()=>[(_(),v(H,null,M(A,e=>l(q,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),o.value.relay_type==0?(_(),v("div",pe,[l(s,{style:{"margin-left":"10px"},type:"primary"},{default:u(()=>[n("UDP Host:")]),_:1}),l(r,{modelValue:o.value.udp,"onUpdate:modelValue":t[9]||(t[9]=e=>o.value.udp=e),onClick:d,style:{width:"180px"},placeholder:"Please input"},null,8,["modelValue"]),l(s,{style:{"margin-left":"10px"},type:"primary"},{default:u(()=>[n("Port:")]),_:1}),l(r,{modelValue:o.value.r_port,"onUpdate:modelValue":t[10]||(t[10]=e=>o.value.r_port=e),onClick:d,style:{width:"180px"},placeholder:"Please input"},null,8,["modelValue"])])):L("",!0),o.value.relay_type==1?(_(),v("div",me,[l(s,{style:{"margin-left":"10px"},type:"primary"},{default:u(()=>[n("MQTT Host:")]),_:1}),l(r,{modelValue:o.value.r_host,"onUpdate:modelValue":t[11]||(t[11]=e=>o.value.r_host=e),onClick:d,style:{width:"180px"},placeholder:"Please input"},null,8,["modelValue"]),l(s,{style:{"margin-left":"10px"},type:"primary"},{default:u(()=>[n("Port:")]),_:1}),l(r,{modelValue:o.value.r_port,"onUpdate:modelValue":t[12]||(t[12]=e=>o.value.r_port=e),onClick:d,style:{width:"180px"},placeholder:"Please input"},null,8,["modelValue"]),l(s,{style:{"margin-left":"10px"},type:"primary"},{default:u(()=>[n("Subscription Topic:")]),_:1}),l(r,{modelValue:o.value.r_pub,"onUpdate:modelValue":t[13]||(t[13]=e=>o.value.r_pub=e),onClick:d,style:{width:"180px"},placeholder:"Please input"},null,8,["modelValue"])])):L("",!0),l(c,{type:"primary",style:{"margin-left":"10px"},onClick:S},{default:u(()=>[n("设置")]),_:1})]),default:u(()=>[i("div",null,[_e,o.value.relay_type==1?(_(),v("div",ye,[l(s,{type:"primary"},{default:u(()=>[n("User:")]),_:1}),l(r,{modelValue:o.value.r_user,"onUpdate:modelValue":t[14]||(t[14]=e=>o.value.r_user=e),onClick:d,style:{width:"180px"},placeholder:"Please input"},null,8,["modelValue"]),l(s,{style:{"margin-left":"10px"},type:"primary"},{default:u(()=>[n("Password:")]),_:1}),l(r,{modelValue:o.value.r_password,"onUpdate:modelValue":t[15]||(t[15]=e=>o.value.r_password=e),onClick:d,style:{width:"180px"},placeholder:"Please input"},null,8,["modelValue"]),l(s,{style:{"margin-left":"10px"},type:"primary"},{default:u(()=>[n("QoS:")]),_:1}),l(T,{modelValue:o.value.r_qos,"onUpdate:modelValue":t[16]||(t[16]=e=>o.value.r_qos=e),placeholder:"0",size:"large",style:{width:"240px"}},{default:u(()=>[(_(),v(H,null,M(z,e=>l(q,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])):L("",!0),ve,fe,n(),ge,n(" 关于网关以及信标，手环的信息进行推送。包括全部设备上线离线；位置信息；信标运动状态；信标/手环报警；电量信息等。 ")]),ce,Ve]),_:1}),l(b,{title:"Efficiency",name:"13"},{title:u(()=>[l(s,null,{default:u(()=>[n("离线检测")]),_:1}),l(R,{style:{width:"500px","margin-left":"30px"},onClick:d,modelValue:o.value.line_time,"onUpdate:modelValue":t[17]||(t[17]=e=>o.value.line_time=e),step:1,max:10,min:1,"show-stops":"","format-tooltip":G},null,8,["modelValue"]),l(c,{type:"primary",style:{"margin-left":"30px"},onClick:S},{default:u(()=>[n("设置")]),_:1})]),default:u(()=>[be]),_:1}),l(b,{title:"Efficiency",name:"15"},{title:u(()=>[l(s,null,{default:u(()=>[n("定位参数")]),_:1}),l(s,{style:{"margin-left":"10px"}},{default:u(()=>[n("一米信号值")]),_:1}),l(T,{modelValue:U.value,"onUpdate:modelValue":t[18]||(t[18]=e=>U.value=e),onClick:d,size:"large",style:{width:"140px","margin-left":"5px"}},{default:u(()=>[(_(),v(H,null,M(K,e=>l(q,{value:e.value,key:e.label},{default:u(()=>[n(J(e.label),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),l(s,{style:{"margin-left":"10px"}},{default:u(()=>[n("环境因子")]),_:1}),l(r,{modelValue:k.value,"onUpdate:modelValue":t[19]||(t[19]=e=>k.value=e),style:{width:"200px","margin-left":"5px"},placeholder:"Please input",onClick:d},null,8,["modelValue"]),l(s,{style:{"margin-left":"10px"}},{default:u(()=>[n("基站高度")]),_:1}),l(r,{modelValue:P.value,"onUpdate:modelValue":t[20]||(t[20]=e=>P.value=e),style:{width:"200px","margin-left":"5px"},placeholder:"Please input",onClick:d},null,8,["modelValue"]),l(s,{style:{"margin-left":"10px"}},{default:u(()=>[n("限制范围算法")]),_:1}),l(Q,{style:{"margin-left":"5px"},modelValue:V.value,"onUpdate:modelValue":t[21]||(t[21]=e=>V.value=e),onClick:d},null,8,["modelValue"]),l(c,{type:"primary",style:{"margin-left":"30px"},onClick:I},{default:u(()=>[n("设置")]),_:1})]),default:u(()=>[xe]),_:1}),l(b,{title:"Efficiency",name:"16"},{title:u(()=>[l(s,null,{default:u(()=>[n("固件下载地址")]),_:1}),l(r,{modelValue:C.value,"onUpdate:modelValue":t[22]||(t[22]=e=>C.value=e),style:{width:"300px","margin-left":"5px"},placeholder:"Please input",onClick:d},null,8,["modelValue"]),l(c,{type:"primary",style:{"margin-left":"30px"},onClick:F},{default:u(()=>[n("设置")]),_:1})]),default:u(()=>[he]),_:1})]),_:1},8,["modelValue"])])])])}}});export{Ce as default};
