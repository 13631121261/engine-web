import{a as I,d as w,c as S}from"./index-1515df1a.js";import{h as K,w as y,r as V,F as M,q as _,o as B,k as Q,p as i,Q as s,m as k,z as l,P as T,t as h,Z as g,V as u,a7 as Z,K as v}from"./vue-974988d6.js";const x="/userApi";function te(m){return I(),w({url:x+"/getAllProject",method:"get",params:{project_name:m}})}function G(m={}){return w({url:x+"/addProject",method:"post",data:m})}function H(m={}){return w({url:x+"/updateProject",method:"post",data:m})}function J(m){return w({url:x+"/deleteProject",method:"get",params:{project_key:m}})}const O=k("div",null,null,-1),W={class:"dialog-footer"},X={style:{"text-align":"right",margin:"0"}},oe=K({__name:"popupForm_add",props:{show:Boolean,items:{}},emits:["get-change"],setup(m,{emit:F}){const n=m,{t}=S();y("default");const C=y(),o=V({user_key:"",project_key:"",project_name:"",project_info:""});let p=y(!1);""+t("addProject");const N=V({project_name:[{required:!0,message:t("project_name_tip"),trigger:"blur"},{min:3,max:20,message:t("project_name_tip_len"),trigger:"blur"}],project_info:[{required:!0,message:t("project_info_tip"),trigger:"blur"},{min:10,max:50,message:t("project_info_tip_len"),trigger:"blur"}]});function j(r){F("get-change",r)}y(!1);const d=V({submitLoading:!1});function b(){n.items!=null?(o.project_name=n.items.project_name,o.project_info=n.items.info):(o.project_name="",o.project_info="")}function $(r){p.value=!1,J(o.project_key).then(e=>{b(),j("reload"),e.code==1&&v({message:e.msg,type:"success"})}).finally(()=>{console.log("这里aa"),d.submitLoading=!1})}function A(){var r;(r=C.value)==null||r.validate(e=>{if(console.log("000"),e)if(d.submitLoading=!0,n.items!=null){if(o.project_name==n.items.project_name&&o.project_info==n.items.info){v({message:t("no_change"),type:"success"}),d.submitLoading=!1;return}q()}else U()})}let c=y("");M(()=>{n.items==null?c.value=t("addProject"):(o.project_key=n.items.project_key,c.value=t("updateProject"),o.project_name=n.items.project_name,o.project_info=n.items.info,o.user_key=n.items.user_key)});function R(){p.value=!1,j("cancel")}function U(){G(o).then(r=>{r.code==1&&v({message:r.msg,type:"success"}),b(),j("reload")}).finally(()=>{console.log("这里aa"),d.submitLoading=!1})}function q(){H(o).then(r=>{r.code==1&&v({message:r.msg,type:"success"}),b(),j("reload")}).finally(()=>{console.log("这里aa"),d.submitLoading=!1})}return(r,e)=>{const P=_("el-input"),L=_("el-form-item"),z=_("el-form"),f=_("el-button"),D=_("el-popover"),E=_("el-dialog");return B(),Q("div",null,[i(E,{"close-on-click-modal":!1,"before-close":R,"show-close":!1,title:l(c),"onUpdate:title":e[8]||(e[8]=a=>h(c)?c.value=a:c=a),width:"30%","align-center":"",modelValue:l(n).show,"onUpdate:modelValue":e[9]||(e[9]=a=>l(n).show=a),draggable:""},{footer:s(()=>[k("span",W,[i(D,{visible:l(p),placement:"top",width:160},{reference:s(()=>[l(n).items!=null?(B(),T(f,{key:0,type:"danger",onClick:e[4]||(e[4]=a=>h(p)?p.value=!0:p=!0)},{default:s(()=>[g(u(l(t)("Delete")),1)]),_:1})):Z("",!0)]),default:s(()=>[k("p",null,u(l(t)("delete_tip")),1),k("div",X,[i(f,{size:"small",type:"info",onClick:e[2]||(e[2]=a=>h(p)?p.value=!1:p=!1)},{default:s(()=>[g(u(l(t)("Cancel")),1)]),_:1}),i(f,{size:"small",type:"danger",onClick:e[3]||(e[3]=a=>$())},{default:s(()=>[g(u(l(t)("Delete")),1)]),_:1})])]),_:1},8,["visible"]),i(f,{type:"info",onClick:e[5]||(e[5]=a=>j("cancel"))},{default:s(()=>[g(u(l(t)("Cancel")),1)]),_:1}),i(f,{type:"warning",onClick:e[6]||(e[6]=a=>b())},{default:s(()=>[g(u(l(t)("Reset")),1)]),_:1}),i(f,{type:"primary",loading:d.submitLoading,onClick:e[7]||(e[7]=a=>A())},{default:s(()=>[g(u(l(t)("Confirm")),1)]),_:1},8,["loading"])])]),default:s(()=>[O,i(z,{ref_key:"ruleFormRef",ref:C,model:o,rules:N,"label-position":"top","label-width":"100px",style:{"max-width":"460px"}},{default:s(()=>[i(L,{label:l(t)("project_name"),prop:"project_name"},{default:s(()=>[i(P,{prop:"project_name",modelValue:o.project_name,"onUpdate:modelValue":e[0]||(e[0]=a=>o.project_name=a),clearable:"",maxlength:"20","show-word-limit":""},null,8,["modelValue"])]),_:1},8,["label"]),i(L,{label:l(t)("project_info"),prop:"project_info"},{default:s(()=>[i(P,{"show-word-limit":"",maxlength:"50",modelValue:o.project_info,"onUpdate:modelValue":e[1]||(e[1]=a=>o.project_info=a),rows:4,type:"textarea",placeholder:l(t)("project_hint"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{oe as _,te as g};
