import{_ as k}from"./lodash-6aabf8b1.js";import{h as Y,w as u,G as T,aE as D,F as ee,n as le,q as g,o as te,k as oe,m as o,p as n,Q as a,V as c,z as r,Z as h,aF as ne,aG as ae,K as se}from"./vue-974988d6.js";import{g as de,b as ie,c as ue}from"./index-2e1bac67.js";import{c as ce,_ as re}from"./index-1515df1a.js";const fe={id:"wrap",style:{height:"auto"}},_e={id:"div1"},pe={class:"card-header"},ve={style:{height:"450px"}},ge={class:"custom-tree-node"},he={id:"div2",style:{display:"flex","justify-content":"center","align-items":"center"}},me={style:{"align-items":"center"}},ye={id:"div3"},be={class:"card-header"},xe={style:{height:"450px"}},ke={class:"custom-tree-node"},we=Y({__name:"gateway_group",props:{config_key:{type:String,require:!1,default:""}},emits:["showpop"],setup(q,{emit:B}){const A=q,{t:v}=ce(),F={children:"children",label:"label",disabled:"disabled"},w=u(),C=u(),N=u("");T(N,e=>{w.value.filter(e)});const V=u("");T(V,e=>{C.value.filter(e)});let S=D(A),y=u(!0),b=u(!0);const f=u([]),d=u([]),G=u([]),K=u([]),_=u([]),s=u([]);ee(()=>{le(()=>{P(),U()})});const j=(e,l)=>(console.log(l),e?l.label.includes(e)||l.address.includes(e):!0);function P(){de(S.config_key.value).then(e=>{e.code==1&&(w.value.filter(""),f.value=e.data,G.value=k.cloneDeep(e.data))}).finally(()=>{})}function U(){ie(S.config_key.value).then(e=>{e.code==1&&(C.value.filter(""),d.value=e.data,K.value=k.cloneDeep(e.data))}).finally(()=>{})}function z(e,l){if(y.value=!0,l.checkedKeys.length>0){console.log(l.checkedKeys.length),_.value=l.checkedNodes,console.log("选择="+l.checkedNodes);for(let t=0;t<l.checkedNodes.length;t++)console.log(l.checkedNodes[t]),y.value=!1}}function M(e,l){if(b.value=!0,l.checkedKeys.length>0){console.log(l.checkedKeys.length),s.value=l.checkedNodes,console.log("选择="+l.checkedNodes);for(let t=0;t<l.checkedNodes.length;t++)console.log(l.checkedNodes[t]),b.value=!1}}function Q(){for(let e=0;e<_.value.length;e++){const l={id:_.value[e].id,address:_.value[e].address,label:_.value[e].label,children:[]};_.value[e].is_append=!0,_.value[e].children||d.value[0].children.push(l)}for(let e=0;e<f.value.length;e++){if(f.value[e].children.length>0)for(let l=0;l<f.value[e].children.length;l++)for(let t=0;t<_.value.length;t++){console.log(_.value[t]);const p=f.value[e].children.findIndex(m=>m.id===_.value[t].id);p!=-1&&(f.value[e].children.splice(p,1),console.log("index="+p))}y.value=!0}}function R(){console.log(s);for(let e=0;e<s.value.length;e++){console.log("循环="+e),console.log(s.value[e].children);const l={id:s.value[e].id,assress:s.value[e].assress,label:s.value[e].label,children:[]};s.value[e].is_append=!0,(s.value[e].children==null||s.value[e].children.length==0)&&(console.log("push="),f.value[0].children.push(l))}for(let e=0;e<d.value.length;e++){if(d.value[e].children.length>0)for(let l=0;l<d.value[e].children.length;l++)for(let t=0;t<s.value.length;t++){console.log(s.value[t]);const p=d.value[e].children.findIndex(m=>m.id===s.value[t].id);p!=-1&&(d.value[e].children.splice(p,1),console.log("index="+p))}b.value=!0}}function Z(){console.log("重置"),d.value=k.cloneDeep(K.value),f.value=k.cloneDeep(G.value),y.value=!0,b.value=!0,console.log(f.value),console.log(G.value)}function H(){B("showpop"),console.log("点击返回")}function J(){return y.value}function L(){return b.value}function O(){return k.isEqual(K.value,d.value)}function W(){console.log(d.value),ue(S.config_key.value,d.value).then(e=>{se({message:e.msg,type:"success"}),console.log(e)}).finally()}return(e,l)=>{const t=g("el-input"),p=g("el-text"),m=g("el-tree"),E=g("el-scrollbar"),I=g("el-card"),X=g("el-icon"),x=g("el-button");return te(),oe("div",fe,[o("div",_e,[n(I,{class:"box-card"},{header:a(()=>[o("div",pe,[o("h1",null,c(r(v)("unlink_gateway")),1)])]),default:a(()=>[o("div",ve,[n(t,{modelValue:N.value,"onUpdate:modelValue":l[0]||(l[0]=i=>N.value=i),placeholder:r(v)("mac_filter")},null,8,["modelValue","placeholder"]),n(E,{style:{height:"300px","margin-bottom":"10px"}},{default:a(()=>[n(m,{"default-expand-all":"",accordion:"","node-key":"id",onCheck:z,style:{"margin-top":"10px"},ref_key:"atree",ref:w,data:f.value,"show-checkbox":"","filter-node-method":j},{default:a(({node:i,data:$})=>[o("span",ge,[o("span",null,c(i.label),1),o("span",null,[n(p,{class:"mx-1",type:"primary"},{default:a(()=>[h(c($.address),1)]),_:2},1024)])])]),_:1},8,["data"])]),_:1})])]),_:1})]),o("div",he,[o("div",me,[n(x,{disabled:J(),type:"primary",style:{"margin-bottom":"10px"},onClick:l[1]||(l[1]=i=>Q())},{default:a(()=>[h(c(r(v)("link")),1),n(X,{class:"el-icon--right"},{default:a(()=>[n(r(ne))]),_:1})]),_:1},8,["disabled"]),n(x,{disabled:L(),type:"danger",icon:r(ae),style:{"margin-left":"0px","margin-top":"10px"},onClick:l[2]||(l[2]=i=>R())},{default:a(()=>[h(c(r(v)("unlink")),1)]),_:1},8,["disabled","icon"])])]),o("div",ye,[n(I,{class:"box-card"},{header:a(()=>[o("div",be,[o("h1",null,c(r(v)("link_gateway")),1),o("div",null,[n(x,{style:{"margin-right":"0px"},class:"button",onClick:l[3]||(l[3]=i=>H())},{default:a(()=>[h(c(r(v)("fanhui")),1)]),_:1}),n(x,{class:"button",type:"warning",onClick:l[4]||(l[4]=i=>Z())},{default:a(()=>[h(c(r(v)("reset")),1)]),_:1}),n(x,{class:"button",type:"primary",disabled:O(),onClick:l[5]||(l[5]=i=>W())},{default:a(()=>[h(c(r(v)("submit")),1)]),_:1},8,["disabled"])])])]),default:a(()=>[o("div",xe,[n(t,{modelValue:V.value,"onUpdate:modelValue":l[6]||(l[6]=i=>V.value=i),placeholder:r(v)("mac_filter")},null,8,["modelValue","placeholder"]),n(E,{style:{height:"300px","margin-bottom":"10px"}},{default:a(()=>[n(m,{"default-expand-all":"","node-key":"id",onCheck:M,style:{"margin-top":"10px"},ref_key:"btree",ref:C,data:d.value,props:F,"show-checkbox":"","filter-node-method":j},{default:a(({node:i,data:$})=>[o("span",ke,[o("span",null,c(i.label),1),o("span",null,[n(p,{class:"mx-1",type:"primary"},{default:a(()=>[h(c($.address),1)]),_:2},1024)])])]),_:1},8,["data"])]),_:1})])]),_:1})])])}}});const Ge=re(we,[["__scopeId","data-v-8173a68b"]]);export{Ge as default};
