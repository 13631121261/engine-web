import{u as R,_ as y,c as k,h as C,k as I,a4 as M,z as S}from"./index-1515df1a.js";import{b as F,r as j,g as q}from"./router-23ec191f.js";import{h as d,q as n,o as m,P as p,Q as s,p as e,ag as A,z as f,al as h,l as b,O as B,a5 as N,ae as $,F as z,i as D,K as H}from"./vue-974988d6.js";import{H as v,A as P,F as g}from"./footer-76c0aec1.js";import{m as w}from"./layout-a8cf179c.js";import"./useDark-df56ad75.js";const E=d({__name:"main",setup(i){const c=R();return(u,r)=>{const a=n("router-view"),o=n("el-main");return m(),p(o,{class:"layout-main"},{default:s(()=>[e(a,null,{default:s(({Component:t})=>[e(A,{name:f(c).layout.mainAnimation,mode:"out-in"},{default:s(()=>[(m(),p(h(t)))]),_:2},1032,["name"])]),_:1})]),_:1})}}});const L=y(E,[["__scopeId","data-v-bc73de31"]]),O=d({__name:"default",setup(i){return(c,u)=>{const r=n("el-col"),a=n("el-row"),o=n("el-scrollbar"),t=n("el-container");return m(),p(t,{class:"is-vertical"},{default:s(()=>[e(v),e(o,{style:b(f(w)()),ref:"mainScrollbarRef"},{default:s(()=>[e(a,{class:"frontend-footer-brother",justify:"center"},{default:s(()=>[e(r,{class:"user-layouts",span:16,xs:24},{default:s(()=>[e(P,{class:"hidden-sm-and-down"}),e(L)]),_:1})]),_:1}),e(g)]),_:1},8,["style"])]),_:1})}}});const T=y(O,[["__scopeId","data-v-64942115"]]),U=d({__name:"disable",setup(i){return(c,u)=>{const r=n("el-alert"),a=n("el-col"),o=n("el-row"),t=n("el-scrollbar"),_=n("el-container");return m(),p(_,{class:"is-vertical"},{default:s(()=>[e(v),e(t,{style:b(f(w)()),ref:"mainScrollbarRef"},{default:s(()=>[e(o,{class:"frontend-footer-brother",justify:"center"},{default:s(()=>[e(a,{class:"user-layouts",span:16,xs:24},{default:s(()=>[e(r,{center:!0,title:c.$t("Member center disabled"),type:"error"},null,8,["title"])]),_:1})]),_:1}),e(g)]),_:1},8,["style"])]),_:1})}}});const J=y(U,[["__scopeId","data-v-e004cd2e"]]);function K(){return new Promise(i=>{i({type:"continue"})})}const Z=d({components:{Default:T,Disable:J},__name:"user",setup(i){const{t:c}=k(),u=B(),r=N(),a=C(),o=I();return $(t=>{o.setActiveRoute(t)}),z(async()=>{const t=await K();if(t.type!="break"){if(t.type=="reload")return window.location.href=t.url;if(!a.token)return r.push({name:"userLogin"});M().then(_=>{if(_.data.userInfo.refresh_token=a.getToken("refresh"),a.dataFill(_.data.userInfo),_.data.menus){if(F(_.data.menus,_.data.rules),t.type=="jump")return r.push(t.url);if(u.params.to){const l=JSON.parse(u.params.to);if(l.path!=S.path){let x=D(l.query)?{}:l.query;j({path:l.path,query:x});return}}if(u.name=="userMainLoading"){let l=q(o.state.viewRoutes);l?r.push({path:l.path}):H({type:"error",message:c("No route found to jump~")})}}}),document.body.clientWidth<1024?o.setShrink(!0):o.setShrink(!1)}}),(t,_)=>(m(),p(h(f(o).state.layoutMode)))}});export{Z as default};
