import{S as F,$ as d}from"./sass.default-e4c9116c.js";import{m as A}from"./map-a5492c66.js";var p;let f=!1;var u=!0,o=[],h=0,x=0,c;function I(l,a){p=F("#svgPanel"),o=[],f=!1,u=!0;var r=0;A(),P()&&(r=1),d("#svgPanel").on("click",function(n){if(f){f=!1;return}if(u&&!(h==n.offsetX&&x==n.offsetY)&&(h=n.offsetX,x=n.offsetY,o.push(w(n.offsetX,n.offsetY,r)),o.length>0)){for(var e="",t=0;t<o.length;t++)e=e+o[t].x+","+o[t].y+" ";console.log("折线="+e),m(e)}}).on("mousemove",function(n){if(o.length>0&&u&&!f){for(var e="",t=0;t<o.length;t++)e=e+o[t].x+","+o[t].y+" ";var i=w(n.offsetX,n.offsetY,r);e=e+i.x+","+i.y,m(e)}}).on("dblclick",function(n){if(o.length>3){console.log(f),f=!0,o[0];for(var e="",t=0;t<o.length;t++)e=e+o[t].x+","+o[t].y+" ";e=e+o[0].x+","+o[0].y,o.push({x:o[0].x,y:o[0].y}),m(e),c=p.polygon(e),c.opacity(.1),c.fill("#0aa"),u=!1,l(e,o,a)}})}function v(l,a){this.x=l,this.y=a}v.prototype.toString=function(){return this==null?"null":'{"x": '+this.x+', "y": '+this.y+"}"};function w(l,a,r){d("li.building-on");var n=0,e=0,t="",i="",s="",b=document.getElementById("svgPanel"),g=b.getAttribute("transform");if(g.indexOf(",")<0){var y=g.split(" ");g=y[0]+","+y[1]+" "+y[2]}return s=g.split(" "),t=s[0].substring(10,s[0].length-1).split(","),s.length==3?i=parseFloat(s[2].substring(6,s[2].length-1)):s.length==2&&(i=parseFloat(s[1].substring(6,s[1].length-1))),n=parseFloat(t[0]),e=parseFloat(t[1]),r==1?(console.log("trX/scale :",(n/i).toFixed(2)),console.log("trY/scale :",(e/i).toFixed(2)),new v((l/i).toFixed(2),(a/i).toFixed(2))):new v(((l-n)/i).toFixed(2),((a-e)/i).toFixed(2))}function m(l){var a=document.getElementById("polyline");if(a)d("#polyline").attr("points",l),console.log("创建这项222");else{var r=document.createElementNS("http://www.w3.org/2000/svg","polyline"),n=document.getElementById("svgPanel");console.log("创建这项11"),r.setAttribute("id","polyline"),r.setAttribute("points",l),r.setAttribute("style","fill:none;stroke:red;stroke-width:"+.5),n.appendChild(r),console.log("创建这项*********"+l)}}function S(l){f=!0,u=!1;for(var a=l.split(" "),r=0;r<a.length;r++){var n=a[r].split(",");o.push(new v(n[0],n[1]))}var e=document.getElementById("polyline");if(!e){var t=document.createElementNS("http://www.w3.org/2000/svg","polyline"),i=document.getElementById("svgPanel");console.log("创建这项11"+i),t.setAttribute("id","polyline"),t.setAttribute("points",l),t.setAttribute("style","fill:none;stroke:red;stroke-width:"+.5),i.appendChild(t),console.log("创建这项*********"+l)}console.log("points:"+l)}function k(){d("#polyline").remove(),o=[],f=!1,u=!0,c.remove()}function P(){var l=navigator.userAgent;return window.ActiveXObject||"ActiveXObject"in window?!0:(l.indexOf("Firefox")>-1,!1)}export{S as a,k as c,I as l};
